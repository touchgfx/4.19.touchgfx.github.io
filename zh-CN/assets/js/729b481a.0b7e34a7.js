"use strict";(self.webpackChunktouchgfx_documentation=self.webpackChunktouchgfx_documentation||[]).push([[319],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return s}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=r.createContext({}),c=function(e){var t=r.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(d.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,d=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),h=c(n),s=a,m=h["".concat(d,".").concat(s)]||h[s]||p[s]||o;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function s(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},70814:function(e,t,n){var r=n(67294),a=n(88678);const o=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},r.createElement("path",{"fill-rule":"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}));class i extends r.Component{render(){return r.createElement(a.Z,{color:"var(--highlight-color-caution)",header:"Caution",type:"caution",icon:o},this.props.children)}}t.Z=i},22425:function(e,t,n){var r=n(67294);class a extends r.Component{render(){return r.createElement("div",{class:"code-header"},r.createElement("div",null,r.createElement("h5",null,this.props.children)))}}t.Z=a},44035:function(e,t,n){var r=n(67294),a=n(25026);t.Z=function(e){const t=e.noShadow||!1,n=e.width,o=e.height,i=(0,a.Z)(e.imageSource);return t?r.createElement("div",{class:"figure noshadow"},r.createElement("a",{href:i,target:"_blank"},r.createElement("img",{width:n,height:o,src:i})),r.createElement("p",null,e.children)):r.createElement("div",{class:"figure"},r.createElement("a",{href:i,target:"_blank"},r.createElement("img",{width:n,height:o,src:i})),r.createElement("p",null,e.children))}},29415:function(e,t,n){var r=n(67294),a=n(88678);const o=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},r.createElement("path",{"fill-rule":"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}));class i extends r.Component{render(){return r.createElement(a.Z,{color:"var(--highlight-color-further-reading)",header:"Further reading",type:"further-reading",icon:o},this.props.children)}}t.Z=i},88678:function(e,t,n){var r=n(67294);class a extends r.Component{render(){const e=`highlight highlight-${this.props.type}`;return r.createElement("div",{class:e},r.createElement("div",{class:"highlight-heading"},r.createElement("h5",null,r.createElement("div",{class:"highlight-icon"},this.props.icon),this.props.header)),r.createElement("div",{class:"highlight-content"},this.props.children))}}t.Z=a},93054:function(e,t,n){var r=n(67294),a=n(88678);const o=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},r.createElement("path",{"fill-rule":"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}));class i extends r.Component{render(){return r.createElement(a.Z,{color:"var(--highlight-color-note)",header:"Note",type:"note",icon:o},this.props.children)}}t.Z=i},39130:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(67294),a=n(73727),o=n(11368),i=n(35096),l=n(84487);const d=(0,r.createContext)({collectLink:()=>{}});var c=n(25026),u=n(67023),p=Object.defineProperty,h=Object.defineProperties,s=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&k(e,n,t[n]);if(m)for(var n of m(t))f.call(t,n)&&k(e,n,t[n]);return e};var b=function(e){var t,n=e,{isNavLink:p,to:k,href:b,activeClassName:v,isActive:C,"data-noBrokenLinkCheck":X,autoAddBaseUrl:S=!0}=n,G=((e,t)=>{var n={};for(var r in e)g.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&m)for(var r of m(e))t.indexOf(r)<0&&f.call(e,r)&&(n[r]=e[r]);return n})(n,["isNavLink","to","href","activeClassName","isActive","data-noBrokenLinkCheck","autoAddBaseUrl"]);const{siteConfig:{trailingSlash:w,baseUrl:N}}=(0,o.Z)(),{withBaseUrl:y}=(0,c.C)(),M=(0,r.useContext)(d),F=k||b,x=(0,i.Z)(F),_=null==F?void 0:F.replace("pathname://","");let D=void 0!==_?(O=_,S&&(e=>e.startsWith("/"))(O)?y(O):O):void 0;var O;D&&x&&(D=(0,u.applyTrailingSlash)(D,{trailingSlash:w,baseUrl:N}));const E=(0,r.useRef)(!1),A=p?a.OL:a.rU,R=l.Z.canUseIntersectionObserver,I=(0,r.useRef)();(0,r.useEffect)((()=>(!R&&x&&null!=D&&window.docusaurus.prefetch(D),()=>{R&&I.current&&I.current.disconnect()})),[I,D,R,x]);const U=null!==(t=null==D?void 0:D.startsWith("#"))&&void 0!==t&&t,P=!D||!x||U;return D&&x&&!U&&!X&&M.collectLink(D),P?r.createElement("a",T(T({href:D},F&&!x&&{target:"_blank",rel:"noopener noreferrer"}),G)):r.createElement(A,T((B=T({},G),h(B,s({onMouseEnter:()=>{E.current||null==D||(window.docusaurus.preload(D),E.current=!0)},innerRef:e=>{var t,n;R&&e&&x&&(t=e,n=()=>{null!=D&&window.docusaurus.prefetch(D)},I.current=new window.IntersectionObserver((e=>{e.forEach((e=>{t===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(I.current.unobserve(t),I.current.disconnect(),n())}))})),I.current.observe(t))},to:D||""}))),p&&{isActive:C,activeClassName:v}));var B}},35096:function(e,t,n){function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!r(e)}n.d(t,{b:function(){return r},Z:function(){return a}})},25026:function(e,t,n){n.d(t,{C:function(){return o},Z:function(){return i}});var r=n(11368),a=n(35096);function o(){const{siteConfig:{baseUrl:e="/",url:t}={}}=(0,r.Z)();return{withBaseUrl:(n,r)=>function(e,t,n,{forcePrependBaseUrl:r=!1,absolute:o=!1}={}){if(!n)return n;if(n.startsWith("#"))return n;if((0,a.b)(n))return n;if(r)return t+n;const i=n.startsWith(t)?n:t+n.replace(/^\//,"");return o?e+i:i}(t,e,n,r)}}function i(e,t={}){const{withBaseUrl:n}=o();return n(e,t)}},67271:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{trailingSlash:n,baseUrl:r}=t;if(e.startsWith("#"))return e;if(void 0===n)return e;const[a]=e.split(/[#?]/),o="/"===a||a===r?a:(i=a,n?function(e){return e.endsWith("/")?e:`${e}/`}(i):function(e){return e.endsWith("/")?e.slice(0,-1):e}(i));var i;return e.replace(a,o)}},67023:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.uniq=t.applyTrailingSlash=void 0;var a=n(67271);Object.defineProperty(t,"applyTrailingSlash",{enumerable:!0,get:function(){return r(a).default}});var o=n(11080);Object.defineProperty(t,"uniq",{enumerable:!0,get:function(){return r(o).default}})},11080:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Array.from(new Set(e))}},18325:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return T},contentTitle:function(){return b},metadata:function(){return v},toc:function(){return C},default:function(){return S}});var r=n(3905),a=n(44035),o=n(93054),i=n(29415),l=n(22425),d=n(70814),c=n(39130),u=Object.defineProperty,p=Object.defineProperties,h=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&f(e,n,t[n]);if(s)for(var n of s(t))g.call(t,n)&&f(e,n,t[n]);return e};const T={id:"touchgfx-generator",title:"Generator\u7528\u6237\u6307\u5357"},b=void 0,v={unversionedId:"development/touchgfx-hal-development/touchgfx-generator",id:"development/touchgfx-hal-development/touchgfx-generator",isDocsHomePage:!1,title:"Generator\u7528\u6237\u6307\u5357",description:"TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is a STM32CubeMX Additional-Software component that helps developers configure TouchGFX to run on their hardware platform. Based on existing STM32CubeMX settings and user input TouchGFX Generator will generate the files required to configure a working TouchGFX application. \u8fd9\u5305\u62ecTouchGFX HAL\u3001TouchGFX OSAL\u548cTouchGFX\u914d\u7f6e\u6587\u4ef6\u3002",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/development/touchgfx-hal-development/touchgfx-generator.mdx",sourceDirName:"development/touchgfx-hal-development",slug:"/development/touchgfx-hal-development/touchgfx-generator",permalink:"/4.19/zh-CN/docs/development/touchgfx-hal-development/touchgfx-generator",tags:[],version:"current",frontMatter:{id:"touchgfx-generator",title:"Generator\u7528\u6237\u6307\u5357"},sidebar:"docs",previous:{title:"\u62bd\u8c61\u5c42\u67b6\u6784",permalink:"/4.19/zh-CN/docs/development/touchgfx-hal-development/touchgfx-architecture"},next:{title:"LTDC/\u5e76\u884cRGB",permalink:"/4.19/zh-CN/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb"}},C=[{value:"\u4f7f\u80fdTouchGFX Generator",id:"enabling-touchgfx-generator",children:[],level:2},{value:"\u751f\u6210\u7684\u4ee3\u7801\u67b6\u6784",id:"generated-code-architecture",children:[],level:2},{value:"\u7279\u6027\u6982\u8ff0",id:"feature-overview",children:[],level:2},{value:"\u663e\u793a",id:"display",children:[{value:"\u63a5\u53e3\u4e0e\u5c3a\u5bf8",id:"interface-and-dimensions",children:[],level:3},{value:"Framebuffer Pixel Format",id:"framebuffer-pixel-format",children:[],level:3},{value:"\u7f13\u51b2\u7b56\u7565",id:"buffering-strategies",children:[],level:3}],level:2},{value:"\u9a71\u52a8\u5668",id:"driver",children:[{value:"\u5e94\u7528\u6ef4\u7b54\u8ba1\u65f6\u6e90",id:"application-tick-source",children:[],level:3},{value:"\u56fe\u5f62\u52a0\u901f\u5668",id:"graphics-accelerator",children:[],level:3},{value:"\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf",id:"real-time-operating-system",children:[{value:"ThreadX",id:"threadx-middleware-os",children:[{value:"Enabling and configuring ThreadX from the Middleware list available in STM32CubeMX",id:"enabling-and-configuring-threadx-from-the-middleware-list-available-in-stm32cubemx",children:[],level:5},{value:"Enabling and configuring ThreadX from AZRTOS Software Pack",id:"enabling-and-configuring-threadx-from-azrtos-software-pack",children:[],level:5}],level:4},{value:"FreeRTOS",id:"freertos-middleware-os",children:[],level:4},{value:"ThreadX Middleware",id:"threadx-middleware-os",children:[],level:4},{value:"\u5176\u4ed6\u517c\u5bb9CMSIS\u7684OS",id:"other-cmsis-compliant-os",children:[],level:4}],level:3},{value:"\u5176\u5b83\u529f\u80fd",id:"additional-features",children:[{value:"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668",id:"external-data-reader",children:[],level:4},{value:"8bit LTDC Color Look-up Table",id:"8bit-ltdc-color-look-up-table",children:[],level:4}],level:3}],level:2},{value:"Video Decoding",id:"video-decoding",children:[{value:"Type",id:"video-decoding-type",children:[],level:3},{value:"Concurrent videos",id:"video-decoding-number",children:[],level:3},{value:"Strategy",id:"video-decoding-strategy",children:[],level:3},{value:"Decode Format",id:"decode-format",children:[],level:3},{value:"Buffer size",id:"video-decoding-buffer-size",children:[],level:3}],level:2},{value:"\u751f\u6210\u7684\u9879\u76ee",id:"generated-project",children:[],level:2},{value:"TouchGFX Designer\u9879\u76ee",id:"touchgfx-designer-project",children:[],level:2},{value:"\u4fee\u6539\u751f\u6210\u6587\u4ef6",id:"modifying-generated-behavior",children:[],level:2},{value:"\u5347\u7ea7\u9879\u76ee",id:"upgrading-projects",children:[],level:2}],X={toc:C};function S(e){var t,n=e,{components:u}=n,f=((e,t)=>{var n={};for(var r in e)m.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&s)for(var r of s(e))t.indexOf(r)<0&&g.call(e,r)&&(n[r]=e[r]);return n})(n,["components"]);return(0,r.kt)("wrapper",(t=k(k({},X),f),p(t,h({components:u,mdxType:"MDXLayout"}))),(0,r.kt)("p",null,"TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is a STM32CubeMX Additional-Software component that helps developers configure TouchGFX to run on their hardware platform. Based on existing STM32CubeMX settings and user input TouchGFX Generator will generate the files required to configure a working TouchGFX application. \u8fd9\u5305\u62ecTouchGFX HAL\u3001TouchGFX OSAL\u548cTouchGFX\u914d\u7f6e\u6587\u4ef6\u3002"),(0,r.kt)("p",null,"Once code is generated through STM32CubeMX, the TouchGFX project can be opened through TouchGFX Designer where the UI is developed. TouchGFX Designer automatically adds any additional generated code files to the target IDE project that was configured for the project in STM32CubeMX."),(0,r.kt)("h2",k({},{id:"enabling-touchgfx-generator"}),"\u4f7f\u80fdTouchGFX Generator"),(0,r.kt)("p",null,'Users gain access to adding functionality from X-CUBEs by pressing the "Select Components" button.'),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/enable-generator.png",mdxType:"Figure"},"Selecting Additional Software in STM32CubeMX"),(0,r.kt)("p",null,"\u4e0b\u56fe\u663e\u793a\u4e86\u9879\u76ee\u4e2d\u5982\u4f55\u4f7f\u80fdTouchGFX Generator\uff1a"),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/add-generator-v4.17.png",width:"580",mdxType:"Figure"},"\u4f7f\u80fdTouchGFX Generator"),(0,r.kt)("p",null,"If enabling TouchGFX for a Dual-Core MCU, be sure to enable for the the correct context. TouchGFX can only be enabled for a single context:"),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/add-generator-dual-core-v4.17.png",mdxType:"Figure"},"Enabling TouchGFX Generator for Dual Core"),(0,r.kt)("h2",k({},{id:"generated-code-architecture"}),"\u751f\u6210\u7684\u4ee3\u7801\u67b6\u6784"),(0,r.kt)("p",null,"\u5728\u63cf\u8ff0TouchGFX Generator\u7684\u529f\u80fd\u4e4b\u524d\uff0c\u4e86\u89e3\u6240\u751f\u6210\u4ee3\u7801\u7684\u67b6\u6784\u4ee5\u53ca\u5f00\u53d1\u4eba\u5458\u5982\u4f55\u4f7f\u7528\u8be5\u67b6\u6784\u6765\u5b9a\u5236\u914d\u7f6e\u548c\u884c\u4e3a\u81f3\u5173\u91cd\u8981\u3002"),(0,r.kt)("p",null,"Handwritten user code in files generated by STM32CubeMX is protected through the use of ",(0,r.kt)("strong",{parentName:"p"},"User Code")," sections placed strategically throughout the code generated by STM32CubeMX (C code).\xa0\u5728TouchGFX Generator\u751f\u6210\u7684C++\u4ee3\u7801\u4e2d\uff0c\u901a\u8fc7\u7ee7\u627f\u6765\u5b9e\u73b0\u8fd9\u79cd\u7075\u6d3b\u6027\u3002"),(0,r.kt)("p",null,"When TouchGFX Generator is added through ",(0,r.kt)("em",{parentName:"p"},"Additional Software")," and enabled, STM32CubeMX will always create a ",(0,r.kt)("em",{parentName:"p"},"TouchGFX")," folder for the project. The folder always contains the same files, regardless of configuration, while the content of the files changes according to STM32CubeMX and User configuration."),(0,r.kt)("p",null,"The listing below shows an overview of the content of a STM32CubeMX project with TouchGFX Generator ",(0,r.kt)("em",{parentName:"p"},"enabled"),", with emphasis on TouchGFX related files. \u4e0b\u9762\u6309\u5217\u8868\u6982\u8ff0\u4e86\u6700\u91cd\u8981\u6761\u76ee\u7684\u529f\u80fd\u3002"),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},"TouchGFX Folder"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{}),"\u2502   .mxproject\n\u2502   myproject.ioc\n\u251c\u2500\u2500\u2500Core\n\u251c\u2500\u2500\u2500Drivers\n\u251c\u2500\u2500\u2500EWARM\n\u251c\u2500\u2500\u2500Middlewares\n\u2514\u2500\u2500\u2500TouchGFX\n    \u2502   ApplicationTemplate.touchgfx.part\n    \u251c\u2500\u2500\u2500App\n    \u2502       app_touchgfx.c\n    \u2502       app_touchgfx.h\n    \u2514\u2500\u2500\u2500target\n        \u2502   STM32TouchController.cpp\n        \u2502   STM32TouchController.hpp\n        \u2502   TouchGFXGPIO.cpp\n        \u2502   TouchGFXHAL.cpp\n        \u2502   TouchGFXHAL.hpp\n        \u2502\n        \u2514\u2500\u2500\u2500generated\n                OSWrappers.cpp\n                TouchGFXConfiguration.cpp\n                TouchGFXGeneratedHAL.cpp\n                TouchGFXGeneratedHAL.hpp\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",k({parentName:"tr"},{align:null}),"\u6587\u4ef6\u5939"),(0,r.kt)("th",k({parentName:"tr"},{align:null}),"Responsibility"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"myproject.ioc"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"STM32CubeMX Project file")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"\u5185\u6838"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),(0,r.kt)("inlineCode",{parentName:"td"},"main.c"),"\u548c\u542f\u52a8\u4ee3\u7801")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"Drivers"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"CMSIS\u548cMCU\u7cfb\u5217\u9a71\u52a8\u7a0b\u5e8f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"EWARM"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"IDE\u9879\u76ee\u6587\u4ef6\u5939\u3002 \u53ef\u4ee5\u4e3aEWARM\u3001MDK-ARM\u6216STM32CubeIDE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"\u4e2d\u95f4\u4ef6"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"\u5305\u542bTouchGFX\u5e93/\u5934\u6587\u4ef6\u4ee5\u53caFreeRTOS\u7b49\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"ApplicationTemplate.touchgfx.part"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"The .part file is updated by STM32CubeMX with information that is relevant to TouchGFX Designer project, e.g. screen dimensions and bit depth")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"\u5e94\u7528"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"X-CUBE interface to STM32CubeMX. ",(0,r.kt)("inlineCode",{parentName:"td"},"app_touchgfx.c")," contains definitions for the functions ",(0,r.kt)("inlineCode",{parentName:"td"},"MX_TouchGFX_Process(void)")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"MX_TouchGFX_Init(void)")," which are used to initialize TouchGFX and start its main loop.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"\u76ee\u6807/\u751f\u6210"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"This sub-folder contains the read-only files that get overwritten by STM32CubeMX when configurations change. ",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXGeneratedHAL.cpp")," is a sub-class of the TouchGFX class ",(0,r.kt)("inlineCode",{parentName:"td"},"HAL")," and contains the code that STM32CubeMX can generate based on its current configuration. ",(0,r.kt)("inlineCode",{parentName:"td"},"OSWrappers.cpp"),"(OSAL) \u5305\u542b\u4e0eTouchGFX Engine\u540c\u6b65\u6240\u9700\u7684\u529f\u80fd\uff0c\u6700\u540e\u662f",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXConfiguration.cpp"),"\uff0c\u5176\u5305\u542b\u7528\u4e8e\u6784\u5efa\u548c\u914d\u7f6eTouchGFX\u7684\u4ee3\u7801\uff0c\u5305\u62ecHAL\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",k({parentName:"tr"},{align:null}),"\u76ee\u6807"),(0,r.kt)("td",k({parentName:"tr"},{align:null}),"Contains the bulk of files that can be modified by the user to extend the behavior of the HAL or to override configurations generated by STM32CubeMX. ",(0,r.kt)("inlineCode",{parentName:"td"},"STM32TouchController.cpp"),"\u5305\u542b\u89e6\u6478\u63a7\u5236\u5668\u64cd\u4f5c\u7684\u7a7a\u63a5\u53e3\u3002 ",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXHAL.cpp"),"\u5b9a\u4e49",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXGeneratedHAL"),"\u7684\u5b50\u7c7b",(0,r.kt)("inlineCode",{parentName:"td"},"TouchGFXHAL"),"\u3002")))),(0,r.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXConfiguration.cpp"),"\u5305\u542b\u4e00\u4e2a\u7528\u4e8e\u6784\u5efaHAL\u7684\u51fd\u6570\u4ee5\u53ca\u4e00\u4e2a\u7528\u4e8e\u542f\u52a8TouchGFX\u4e3b\u5faa\u73af\u7684\u51fd\u6570\u3002 \u53ef\u5728\u53ef\u7f16\u8f91\u7684\u7528\u6237\u7c7b",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXHAL"),"\u4e2d\u5b8c\u6210\u5176\u4ed6\u914d\u7f6e\u3002 HAL\u7684\u4e00\u822c\u67b6\u6784\u5982\u4e0b\u6240\u793a\uff1a"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/code-architecture.png",noShadow:!0,width:"200",mdxType:"Figure"},"Hierarchy of generated code"),(0,r.kt)("h2",k({},{id:"feature-overview"}),"\u7279\u6027\u6982\u8ff0"),(0,r.kt)("p",null,'Having enabled TouchGFX Generator, three main groups exist in the user interface. A fourth, "Dependencies", will appear if a problem with the current configuration is detected.'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"\u4f9d\u8d56\u5173\u7cfb")),"- \u8be5\u7ec4\u5305\u542b\u9488\u5bf9\u5f00\u5173\u4eba\u5458\u7684\u6709\u5173\u914d\u7f6e\u4e2d\u7684\u4f9d\u8d56\u5173\u7cfb\u3001\u8b66\u544a\u6216\u5177\u4f53\u9519\u8bef\u7684\u901a\u77e5\u3002 \u5982\u679c\u6ca1\u6709\u6761\u76ee\uff0c\u5219\u8be5\u7ec4\u5c06\u9690\u85cf\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"\u663e\u793a")),"- \u8be5\u7ec4\u5305\u542b\u4e0e\u663e\u793a\u6709\u5173\u7684\u8bbe\u7f6e\uff0c\u5982\u63a5\u53e3\u3001\u5e27\u7f13\u5b58\u7684\u4f4d\u6df1\u3001\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u3002 \u8fd9\u4e9b\u8bbe\u7f6e\u76f4\u63a5\u5f71\u54cdTouchGFX\u9879\u76ee\u91cc\u753b\u5e03\u7684\u5927\u5c0f\u4ee5\u53ca\u57fa\u4e8e\u663e\u793a\u90e8\u4ef6\u6240\u751f\u6210\u7684\u4ee3\u7801\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"Driver"))," - This group allows the user to opt-in for a number of ready-made drivers related to the tick source of the application, graphics acceleration (DMA2D and GPU2D) and RTOS. Since STM32CubeMX supports FreeRTOS (CMSIS RTOS v1 and v2) configurations, TouchGFX Generator provides drivers for each of these options."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"Additional Features"))," - This group appears if RGB565 is selected, allowing the user to create am application using image- and font-data from non-memory mapped flash."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"Video Decoding"))," - This group allows the user to enable hardware or software video decoding. This option is necessary to work with the video widget. Note that not all MCUs support video decoding.")),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/four-sections.png",width:"600",mdxType:"Figure"},"TouchGFX Generator has three groups: Display, Driver and Video Decoding"),(0,r.kt)("h2",k({},{id:"display"}),"\u663e\u793a"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"\u663e\u793a"),"\u7ec4\u5305\u542b\u4e0e\u663e\u793a\u6709\u5173\u7684\u914d\u7f6e\uff0c\u5982\u63a5\u53e3\u3001\u5c3a\u5bf8\u548c\u7f13\u51b2\u7b56\u7565\u3002"),(0,r.kt)("h3",k({},{id:"interface-and-dimensions"}),"\u63a5\u53e3\u4e0e\u5c3a\u5bf8"),(0,r.kt)("p",null,"\u5982\u4eca\uff0cSTM32\u5fae\u63a7\u5236\u5668\u53ef\u4f7f\u7528\u591a\u4e2a\u663e\u793a\u63a5\u53e3\uff0c\u5982\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Parallel RGB (LTDC)"),(0,r.kt)("li",{parentName:"ul"},"MIPI DSI"),(0,r.kt)("li",{parentName:"ul"},"FMC"),(0,r.kt)("li",{parentName:"ul"},"SPI")),(0,r.kt)("p",null,"In the case of MCUs with a display connected to an LTDC or FMC ",(0,r.kt)("em",{parentName:"p"},"TouchGFX Generator")," can generate code to transfer the framebuffer to the connected display. For DSI and SPI interfaces drivers must be implemented by developers themselves."),(0,r.kt)(i.Z,{mdxType:"FurtherReading"},"See section ",(0,r.kt)(c.Z,{to:"scenarios/scenarios-ltdc-parallel-rgb",mdxType:"Link"},"Scenarios")," for concrete examples of code for different display interfaces."),(0,r.kt)("h3",k({},{id:"framebuffer-pixel-format"}),"Framebuffer Pixel Format"),(0,r.kt)("p",null,'The following framebuffer pixel formats are currently supported by TouchGFX Generator. All options are available when using "Custom" display interface, otherwise options are restricted to display controller settings (e.g. configuring the LTDC Framebuffer format to "RGB565" will limit the options to "RGB565" in TouchGFX Generator).'),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"BW (1bpp)"),(0,r.kt)("li",{parentName:"ol"},"Grey2 (2bpp)"),(0,r.kt)("li",{parentName:"ol"},"Grey4 (4bpp)"),(0,r.kt)("li",{parentName:"ol"},"ABRG2222 (8bpp)"),(0,r.kt)("li",{parentName:"ol"},"ARGB2222 (8bpp)"),(0,r.kt)("li",{parentName:"ol"},"BGRA2222 (8bpp)"),(0,r.kt)("li",{parentName:"ol"},"RGBA2222 (8bpp)"),(0,r.kt)("li",{parentName:"ol"},"RGB565 (16bpp)"),(0,r.kt)("li",{parentName:"ol"},"RGB888 (24bpp)"),(0,r.kt)("li",{parentName:"ol"},"ARGB8888 (32bpp)"),(0,r.kt)("li",{parentName:"ol"},"XRGB8888 (32bpp)")),(0,r.kt)(o.Z,{mdxType:"Note"},"Some pixel formats have no- or only partial ChromART (DMA2D) support."),(0,r.kt)(d.Z,{mdxType:"Caution"},(0,r.kt)("b",null,"For STM32F7/H7"),": If the framebuffer is placed in Write Through cached memory (e.g. SRAM) then the DCache is flushed by the generated code prior to DMA2D (if configured in the Generator) accessing it. Remember to enable ",(0,r.kt)("b",null,"CPU Cache")," in the ",(0,r.kt)("b",null,"System Core")," settings for ",(0,r.kt)("b",null,"Cortex M7")," in STM32CubeMX in order for this caching mechanic to work."),(0,r.kt)(i.Z,{mdxType:"FurtherReading"},"See the ",(0,r.kt)(c.Z,{to:"../board-bring-up/how-to/02-cpu-running#cache-on-f7-and-h7",mdxType:"Link"},"Cache on F7 and H7")," subsection for more information about CPU caching."),(0,r.kt)("h3",k({},{id:"buffering-strategies"}),"\u7f13\u51b2\u7b56\u7565"),(0,r.kt)("p",null,"\u53ef\u901a\u8fc7TouchGFX Generator\u914d\u7f6e\u4ee5\u4e0b\u5e27\u7f13\u51b2\u7b56\u7565\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5355\u5e27\u7f13\u51b2")," - \u4ec5\u4f7f\u7528\u4e00\u4e2a\u5e94\u7528\u5e27\u7f13\u51b2\u533a\u3002 \u53ef\u80fd\u4f1a\u4f7f\u6027\u80fd\u53d7\u9650\uff0c\u4f46\u5360\u7528\u5185\u5b58\u66f4\u5c11\u3002 \u53ef\u4e0e\u201c\u7f13\u51b2\u4f4d\u7f6e\u201d\u914d\u7f6e\u4e00\u8d77\u4f7f\u7528\uff0c\u5c06\u5176\u653e\u7f6e\u5728\u5185\u90e8RAM\u4e2d\u3002 \u4e3a\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u7528\u6237\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u8fd4\u56de\u663e\u793a\u63a7\u5236\u5668\u6b63\u5728\u5904\u7406\u7684\u5f53\u524d\u884c\u3002 \u8be5\u65b9\u6cd5\u7528\u4e8e\u6846\u67b6\uff0c\u4ee5\u5141\u8bb8\u66f4\u65b0\u8be5\u5e27\u671f\u95f4\u5df2\u4f20\u8f93\u5230\u663e\u793a\u5c4f\u7684\u5185\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u53cc\u7f13\u51b2")," - \u4f7f\u7528\u4e24\u4e2a\u5e27\u7f13\u51b2\u533a\u3002 \u901a\u5e38\u4ee5\u727a\u7272\u5185\u5b58\u4e3a\u4ee3\u4ef7\u6765\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u90e8\u5206\u7f13\u51b2"),"- \u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u7528\u6237\u5b9a\u4e49\u7684\u5185\u5b58\u5757\u4f5c\u4e3a\u5e27\u7f13\u51b2\u533a\u3002 \u8be5\u7b56\u7565\u9002\u7528\u4e8e\u4f4e\u6210\u672c\u89e3\u51b3\u65b9\u6848\uff0c\u5b83\u4e0d\u4f9d\u8d56\u5916\u90e8RAM\u4f46\u53ef\u4ee5\u5b9e\u73b0\u8d85\u51fa\u53ef\u7528\u5185\u5b58\u7684\u5168\u5e27\u7f13\u51b2\u80fd\u529b\u3002")),(0,r.kt)("p",null,"\u5bf9\u4e8e\u5355\u7f13\u51b2\u533a\u548c\u53cc\u7f13\u51b2\u533a\uff0c\u7528\u6237\u53ef\u901a\u8fc7\u201c\u7f13\u51b2\u5668\u4f4d\u7f6e\u201d\u6765\u914d\u7f6e\u5176\u4f4d\u7f6e\uff0c\u8be5\u914d\u7f6e\u63d0\u4f9b\u4ee5\u4e0b\u9009\u9879\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6309\u5206\u914d"),"- \u5141\u8bb8\u94fe\u63a5\u5668\u6839\u636e\u94fe\u63a5\u5668\u811a\u672c\u6765\u653e\u7f6e\u5e27\u7f13\u51b2\u5b58\u50a8\u5668\u3002 \u9ed8\u8ba4\u4f4d\u4e8e\u5185\u90e8RAM\u4e2d\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6309\u5730\u5740"),"- \u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u4e00\u4e2a(\u5355) \u6216\u4e24\u4e2a(\u53cc) \u5e27\u7f13\u51b2\u5730\u5740\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u90e8\u5206\u5e27\u7f13\u51b2"),"\u7b56\u7565\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u4ee5\u4e0b\u53c2\u6570:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5757\u6570\uff08\u59cb\u7ec8\u653e\u7f6e\u5728\u5185\u90e8RAM\u4e2d\uff09"),(0,r.kt)("li",{parentName:"ul"},"\u5757\u5927\u5c0f\uff08\u5b57\u8282\uff09")),(0,r.kt)("p",null,"\u8981\u4e86\u89e3\u6709\u5173\u90e8\u5206\u7f13\u51b2\u6218\u7565\u7684\u4e00\u4e9b\u6838\u5fc3\u6982\u5ff5\uff0c\u8bf7\u9605\u8bfb\u4f7f\u7528\u90e8\u5206\u5e27\u7f13\u51b2\u533a\u964d\u4f4e\u5185\u5b58\u8981\u6c42\u7684",(0,r.kt)("a",k({parentName:"p"},{href:"../scenarios/lowering-memory-usage-with-partial-framebuffer"}),"\u4e13\u7528\u6587\u7ae0"),"\u3002 \u672c\u6587\u4ece\u6982\u5ff5\u4e0a\u8bf4\u660e\u4e86\u5982\u4f55\u5b9e\u73b0\u90e8\u5206\u5e27\u7f13\u51b2\uff0c\u5e76\u4e14\u672c\u6587\u4e2d\u663e\u793a\u7684\u4ee3\u7801\u4e0eTouchGFX Generator\u751f\u6210\u7684\u4ee3\u7801\u7565\u6709\u4e0d\u540c\u3002 \u6709\u5173\u4e3a\u8fd9\u4e9b\u7b56\u7565\u751f\u6210\u7684\u5177\u4f53\u793a\u4f8b\u4ee3\u7801\uff0c\u8bf7\u53c2\u89c1",(0,r.kt)("a",k({parentName:"p"},{href:"scenarios/scenarios-framebuffer-strategies"}),"\u5e27\u7f13\u51b2\u7b56\u7565"),"\u3002"),(0,r.kt)("h2",k({},{id:"driver"}),"\u9a71\u52a8\u5668"),(0,r.kt)("p",null,"\u9a71\u52a8\u5668\u90e8\u5206\u5141\u8bb8\u5f00\u53d1\u4eba\u5458\u4e3aTouchGFX AL\u7684\u5404\u79cd\u529f\u80fd\u9009\u62e9\u9a71\u52a8\u7a0b\u5e8f\u3002"),(0,r.kt)("h3",k({},{id:"application-tick-source"}),"\u5e94\u7528\u6ef4\u7b54\u8ba1\u65f6\u6e90"),(0,r.kt)("p",null,"\u6ef4\u7b54\u8ba1\u65f6\u6e90\u5b9a\u4e49\u4e86\u5982\u4f55\u5c55\u5f00\u9a71\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u3002 \u5f00\u53d1\u4eba\u5458\u5177\u6709\u4ee5\u4e0b\u9009\u9879\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"LTDC"),' - If LTDC is selected as the interface the "Display" group the Application Tick Source can be "LTDC". \u8fd9\u610f\u5473\u7740TouchGFX Generator\u5c06\u5728',(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFXGenerated HAL"),"\u7c7b\u4e2d\u5b89\u88c5\u9a71\u52a8\u7a0b\u5e8f\u51fd\u6570(LTDC\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f) \uff0c\u8be5\u51fd\u6570\u901a\u8fc7\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"OSWrappers::signalVSync()"),"\u6765\u5c55\u5f00\u9a71\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Custom and FMC")," - In this case, the developer is required to implement a handler that drives the application forward by calling ",(0,r.kt)("inlineCode",{parentName:"li"},"OSWrappers::signalVSync()")," repeatedly.")),(0,r.kt)("h3",k({},{id:"graphics-accelerator"}),"\u56fe\u5f62\u52a0\u901f\u5668"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u56fe\u5f62\u52a0\u901f\uff0c\u5f00\u53d1\u4eba\u5458\u6709\u4e09\u4e2a\u9009\u9879\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"None")," - The application renders using only the CPU."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"DMA2D Accelerator (ChromART)")," -\xa0The application uses the ChromART chip when possible to move and blend pixels, freeing up CPU cycles. The driver is generated by TouchGFX Generator and does not require any action from the developer.")),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/multimedia-group-dma2d.png",width:"200",mdxType:"Figure"},"DMA2D is enabled in the *Multimedia* category in CubeMX, for MCUS that support it."),(0,r.kt)("p",null,"The Chrom-ART (DMA2D) driver supplied by TouchGFX Generator supports two ways of receiving a TransferCompleteInterrupt."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Uses the STM32Cube HAL driver where it registers a callback funtion to the dma2d handle ",(0,r.kt)("inlineCode",{parentName:"li"},"hdma2d.XferCpltCallback"),"."),(0,r.kt)("li",{parentName:"ol"},"Uses the ",(0,r.kt)("inlineCode",{parentName:"li"},"DMA2D_IRQHandler()")," interrupt handler directly.")),(0,r.kt)("p",null,"Switching between these two is done by enabling or disabling the DMA2D global interrupt in the NVIC Settings in STM32CubeMX for DMA2D IP. Enabling the global interrupt generated code for option 1), disabling the global interrupt generates code for option 2)."),(0,r.kt)(o.Z,{mdxType:"Note"},(0,r.kt)("li",null,'When using global interrupt for DMA2D, ensure that the "IRQ handler" calls the "DMA2D HAL handler". This is default behaviour.'),(0,r.kt)("li",null,'If disabling "IRQ handler" and "Call HAL handler" for DMA2D while global interrupt is enabled will cause the registered callback to never be called.')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"GPU2D (NeoChrom)")," is a graphics accelerator capable of accelerating many of the drawing operations in TouchGFX, including texture mapping. It supports framebuffers in RGB565, RGB888, and ARGB8888 formats.")),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/multimedia-group-gpu2d.png",width:"190",mdxType:"Figure"},"GPU2D is enabled in the *Multimedia* category in CubeMX, for MCUS that support it."),(0,r.kt)(d.Z,{mdxType:"Caution"},"The GPU2D option is only visible if GPU2D has been enabled in the ",(0,r.kt)("i",null,"Multimedia")," section for your project in CubeMX. It is only available for STM32U599 devices and can only be enabled for use with TouchGFX if the ThreadX RTOS from the ",(0,r.kt)("i",null,"Middlewares")," section is also enabled."),(0,r.kt)("h3",k({},{id:"real-time-operating-system"}),"\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf"),(0,r.kt)("p",null,"\u5f00\u53d1\u4eba\u5458\u53ef\u4f7f\u7528\u4efb\u4f55\u652f\u6301TouchGFX\u7684RTOS\uff08\u751a\u81f3\u65e0\u64cd\u4f5c\u7cfb\u7edf\uff09\u3002 \u5982\u62bd\u8c61\u5c42\u67b6\u6784\u4e2d\u6240\u8ff0\uff0cTouchGFX Engine\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"OSWrappers"),"\u63a5\u53e3\u5c06\u5176\u4e3b\u4e8b\u4ef6\u5faa\u73af\u4ee5\u53ca\u5e27\u7f13\u51b2\u8bbf\u95ee\u4e0e\u7528\u6237\u9009\u62e9\u7684RTOS\u540c\u6b65\u3002 When developers choose an operating system in TouchGFX Generator, code will be generated to syncronize internally via primitives for the OS of choice. The operating system still has to be configured through STM32CubeMX to determine stack size, among other things."),(0,r.kt)("p",null,"FreeRTOS (CMSIS OS V1 and V2) and ThreadX (Native Middleware or Azure RTOS Software Packs) can be configured directly from within STM32CubeMX and TouchGFX Generator providing the user with generated code for both task definitions and TouchGFX RTOS driver. TouchGFX Generator can generate CMSIS V1 and CMSIS V2 compliant RTOS drivers which work with any CMSIS compliant RTOS, a driver for ThreadX, and a driver for running bare metal without an operating system."),(0,r.kt)("h4",k({},{id:"threadx-middleware-os"}),"ThreadX"),(0,r.kt)("p",null,"ThreadX can be enabled either by selecting an AZRTOS Software Pack or by enabling the Native ThreadX Middleware from STM32CubeMX, if available for the selected MCU device."),(0,r.kt)(o.Z,{mdxType:"Note"},(0,r.kt)("li",null,"All new STM32 MCU devices will support, by default, ThreadX Middleware directly available from STM32CubeMX without requiring additional pack downloads. TouchGFX Board Support packs will slowly transition to using either ThreadX middleware, where available, or X-CUBE-AZRTOS software packs."),(0,r.kt)("li",null,"X-CUBE-AZRTOS-XX Expansion Packs providing ThreadX support are already available for the ",(0,r.kt)("i",null,"STM32G0xx, STM32G4xx, STM32L4xx, STM32F4xx, STM32F7xx")," and the ",(0,r.kt)("i",null,"STM32H7xx")," MCU Series.")),(0,r.kt)("p",null,"The following figure shows these options available through the TouchGFX Generator."),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/driver-rtos-options-threadx.png",mdxType:"Figure"},"RTOS\u9a71\u52a8\u7a0b\u5e8f\u9009\u9879"),(0,r.kt)(o.Z,{mdxType:"Note"},(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("i",null,"NoOS"))," option is disabled when ",(0,r.kt)("b",null,"ThreadX")," Middleware is enabled."),(0,r.kt)("li",null,(0,r.kt)("b",null,(0,r.kt)("i",null,"CMSIS_RTOS_V1"))," and ",(0,r.kt)("b",null,(0,r.kt)("i",null,"CMSIS_RTOS_V2"))," options are disabled when ",(0,r.kt)("b",null,"ThreadX")," Middleware is enabled. CMSIS OS wrapper is not provided by ST, customer has to select ",(0,r.kt)("b",null,(0,r.kt)("i",null,"Custom"))," option and implement the CMSIS wrapper.")),(0,r.kt)("h5",k({},{id:"enabling-and-configuring-threadx-from-the-middleware-list-available-in-stm32cubemx"}),"Enabling and configuring ThreadX from the Middleware list available in STM32CubeMX"),(0,r.kt)("p",null,"A succesful memory configuration for ThreadX relies on ",(0,r.kt)("i",null,"Memory Pool Allocation"),". The recommended value is ",(0,r.kt)("i",null,"Static Allocation"),". Perform the folowing steps in the ThreadX Middleware configuration:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Enable ",(0,r.kt)("inlineCode",{parentName:"li"},"THREADX")," Middleware by selecting ",(0,r.kt)("inlineCode",{parentName:"li"},"Core")," from the Mode list, as seen in the figure below."),(0,r.kt)("li",{parentName:"ul"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"TX_TIMER_TICKS_PER_SECOND")," to ",(0,r.kt)("strong",{parentName:"li"},"1000")," to get Ticks each one millisecond"),(0,r.kt)("li",{parentName:"ul"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"Memory Pool Allocation")," to ",(0,r.kt)("strong",{parentName:"li"},"Use Static Allocation"))),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/enable-and-configure-native-threadx-mw.png",mdxType:"Figure"},"Enabling and Configuring Native ThreadX Middleware"),(0,r.kt)(d.Z,{mdxType:"Caution"},(0,r.kt)("li",null,(0,r.kt)("b",null,"Memory Pool Allocation")," should be set to ",(0,r.kt)("b",null,"Use Dynamic Allocation")," when ",(0,r.kt)("b",null,"Native ThreadX Middleware")," is enabled"),(0,r.kt)("ul",null,(0,r.kt)("li",null,"When ",(0,r.kt)("b",null,"Memory Pool Allocation")," is set to ",(0,r.kt)("b",null,"Use Dynamic Allocation")),(0,r.kt)("ul",null,(0,r.kt)("li",null,"User will have to add the missing code in the ",(0,r.kt)("i",null,"USER CODE BEGIN DYNAMIC_MEM_ALLOC")," section in the generated ",(0,r.kt)("b",null,(0,r.kt)("i",null,"app_azure_rtos.c"))," file."),(0,r.kt)("li",null,"User will need also to update the linker files following the recemmendation described in the generated ",(0,r.kt)("b",null,(0,r.kt)("i",null,"app_azure_rtos.c"))," file.")))),(0,r.kt)("h5",k({},{id:"enabling-and-configuring-threadx-from-azrtos-software-pack"}),"Enabling and configuring ThreadX from AZRTOS Software Pack"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Software Packs -> Select Components")," or Press ",(0,r.kt)("inlineCode",{parentName:"li"},"Alt-O"),"."),(0,r.kt)("li",{parentName:"ul"},"Select ",(0,r.kt)("strong",{parentName:"li"},"STMicroelectonics.X-CUBE-AZRTOS-XX"),". Download the pack if required."),(0,r.kt)("li",{parentName:"ul"},"Select ",(0,r.kt)("strong",{parentName:"li"},"RTOS ThreadX")," and check the ",(0,r.kt)("strong",{parentName:"li"},"Core")," check box to enable ThreadX. You can now safely close the ",(0,r.kt)("i",null,"Software Packs Component Selector"),".")),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos.png",mdxType:"Figure"},"Enabling ThreadX from an X-CUBE-AZRTOS Software Pack"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Select the ",(0,r.kt)("i",null,"Software Packs")," group from the ",(0,r.kt)("i",null,"Categories")," list on the left hand side and select ",(0,r.kt)("strong",{parentName:"li"},"STMicroelectonics.X-CUBE-AZRTOS-XX")),(0,r.kt)("li",{parentName:"ul"},"Enable ThreadX by selecting the mode ",(0,r.kt)("strong",{parentName:"li"},"RTOS ThreadX")),(0,r.kt)("li",{parentName:"ul"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"Memory Pool Allocation")," to ",(0,r.kt)("strong",{parentName:"li"},"Use Static Allocation"))),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos-config1.png",width:"800",mdxType:"Figure"},"ThreadX Configuration - X-CUBE-AZRTOS Software Pack"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"TX_TIMER_TICKS_PER_SECOND")," to ",(0,r.kt)("strong",{parentName:"li"},"1000")," to get ticks once per millisecond.")),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos-config2.png",width:"800",mdxType:"Figure"},"ThreadX Configuration - X-CUBE-AZRTOS Software Pack"),(0,r.kt)("h4",k({},{id:"freertos-middleware-os"}),"FreeRTOS"),(0,r.kt)("p",null,"\u8c03\u7528\u4ee5\u4e0b\u51fd\u6570\u65f6\uff0c\u5c06\u8fdb\u5165TouchGFX\u4e3b\u5faa\u73af\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"void\xa0MX_TouchGFX_Process(void);\n")),(0,r.kt)("p",null,"\u5f00\u53d1\u4eba\u5458\u9700\u8981\u5728\u4efb\u52a1\u5904\u7406\u7a0b\u5e8f\u4e2d\u4e3a\u8981\u5728\u5176\u4e2d\u8fd0\u884cTouchGFX\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u52a1\u8c03\u7528\u6b64\u51fd\u6570\u3002 If the user configured a FeeRTOS task from STM32CubeMX called ",(0,r.kt)("inlineCode",{parentName:"p"},"DefaultTask")," then the following example shows how ",(0,r.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Process()")," is called to start TouchGFX in the user code section of its task handler."),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp",metastring:"{4}","{4}":!0}),"void\xa0StartDefaultTask(void\xa0*argument)\n{\n\xa0\xa0/*\xa0USER\xa0CODE\xa0BEGIN\xa05\xa0*/\n  MX_TouchGFX_Process();\n\xa0\xa0/*\xa0USER\xa0CODE\xa0END\xa05\xa0*/\xa0\n}\n")),(0,r.kt)("p",null,"STM32CubeMX will also generate a call to ",(0,r.kt)("inlineCode",{parentName:"p"},"osKernelStart();")," which starts the scheduler."),(0,r.kt)("h4",k({},{id:"threadx-middleware-os"}),"ThreadX Middleware"),(0,r.kt)("p",null,"STM32CubeMX is no more responsible of generating the code creating the threads for middlewares and for the user.",(0,r.kt)("br",null)," STM32CubeMX will generate the call to the ",(0,r.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_PreOSInit()")," function which will initialize the TouchGFX framework",(0,r.kt)("br",null)," STM32CubeMX will generate the call to the ",(0,r.kt)("inlineCode",{parentName:"p"},"MX_ThreadX_Init()()")," function which will initialize and start the ThreadX kernel"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp",metastring:"{4,9}","{4,9}":!0}),"int main(void)\n{\n  /* Call PreOsInit function */\n    MX_TouchGFX_PreOSInit();\n  /* USER CODE BEGIN 2 */\n\n  /* USER CODE END 2 */\n\n  MX_ThreadX_Init();\n}\n")),(0,r.kt)("p",null,"TouchGFX Generator will generate the ",(0,r.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_PreOSInit()")," function which will simply call the ",(0,r.kt)("inlineCode",{parentName:"p"},"touchgfx_init()")),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp",metastring:"{7}","{7}":!0}),"/**\n * PreOS Initialization function\n */\nvoid MX_TouchGFX_PreOSInit(void)\n{\n  // Calling forward to touchgfx_init in C++ domain\n  touchgfx_init();\n}\n")),(0,r.kt)("p",null,"TouchGFX Generator will generate the ",(0,r.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Init()")," function which will create the TouchGFX thread"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp",metastring:"{16-23}","{16-23}":!0}),'/**\n * Create TouchGFX Thread\n */\nUINT MX_TouchGFX_Init(VOID *memory_ptr)\n{\n  UINT ret = TX_SUCCESS;\n  CHAR *pointer = 0;\n\n  /* Allocate the stack for TouchGFX Thread.  */\n  if (tx_byte_allocate((TX_BYTE_POOL*)memory_ptr, (VOID **) &pointer,\n                       TOUCHGFX_STACK_SIZE, TX_NO_WAIT) != TX_SUCCESS)\n  {\n    ret = TX_POOL_ERROR;\n  }\n\n  /* Create TouchGFX Thread */\n  else if (tx_thread_create(&TouchGFXThread, (CHAR *)"TouchGFX", TouchGFX_Task, 0,\n                       pointer, TOUCHGFX_STACK_SIZE,\n                       5, 5,\n                       TX_NO_TIME_SLICE, TX_AUTO_START) != TX_SUCCESS)\n  {\n    ret = TX_THREAD_ERROR;\n  }\n\n  return ret;\n}\n')),(0,r.kt)("p",null,"TouchGFX Generator will generate the required code which will be inserted by STM32CubeMX into the file ",(0,r.kt)("b",null,(0,r.kt)("i",null,"app_azure_rtos.c"))),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp",metastring:"{10,23}","{10,23}":!0}),'  /**\n  * @brief  Define the initial system.\n  * @param  first_unused_memory : Pointer to the first unused memory\n  * @retval None\n  */\nVOID tx_application_define(VOID *first_unused_memory)\n{\n  ...\n\n  if (tx_byte_pool_create(&touchgfx_app_byte_pool, "TouchGFX App memory pool", touchgfx_byte_pool_buffer, TOUCHGFX_APP_MEM_POOL_SIZE) != TX_SUCCESS)\n  {\n    /* USER CODE BEGIN TouchGFX_Byte_Pool_Error */\n\n    /* USER CODE END TouchGFX_Byte_Pool_Error */\n  }\n  else\n  {\n    /* USER CODE BEGIN TouchGFX_Byte_Pool_Success */\n\n    /* USER CODE END TouchGFX_Byte_Pool_Success */\n\n    memory_ptr = (VOID *)&touchgfx_app_byte_pool;\n    if (MX_TouchGFX_Init(memory_ptr) != TX_SUCCESS)\n    {\n      /* USER CODE BEGIN  MX_X-CUBE-TOUCHGFX_Init_Error */\n      while(1);\n      /* USER CODE END  MX_X-CUBE-TOUCHGFX_Init_Error */\n    }\n    /* USER CODE BEGIN  MX_X-CUBE-TOUCHGFX_Init_Success */\n\n    /* USER CODE END  MX_X-CUBE-TOUCHGFX_Init_Success */\n  }\n\n  ...\n}\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"tx_application_define()")," function is called by the ThreadX kernel at initialization time.",(0,r.kt)("br",null)," The ",(0,r.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Init()")," function is called by ",(0,r.kt)("inlineCode",{parentName:"p"},"tx_application_define()"),".",(0,r.kt)("br",null)," The TouchGFX thread will be started later when the ThreadX kernel is started."),(0,r.kt)(o.Z,{mdxType:"Note"},(0,r.kt)("li",null,"STM32CubeMX generate full code only the ",(0,r.kt)("b",null,"Static Memory Pool Allocation")," configuration for the ",(0,r.kt)("b",null,"ThreadX Middlewares"),"."),(0,r.kt)("li",null,"Please refer to the ",(0,r.kt)("i",null,"STM32H7B3I-DK/Applications/AnimatedImages")," example available inside the ",(0,r.kt)("b",null,"X-CUBE-TOUCHGFX")," expansion pack if you want to configure ThreadX with ",(0,r.kt)("b",null,"Dynamic Memory Allocation"))),(0,r.kt)("h4",k({},{id:"other-cmsis-compliant-os"}),"\u5176\u4ed6\u517c\u5bb9CMSIS\u7684OS"),(0,r.kt)("p",null,"When developers require a different CMSIS compliant OS than what STM32CubeMX can offer (FreeRTOS and ThreadX) he must perform RTOS configuration and task definition manually. \u901a\u5e38\uff0c\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u624b\u52a8\u6b65\u9aa4\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u914d\u7f6eRTOS"),(0,r.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u4efb\u52a1\u4ee5\u8fd0\u884cTouchGFX (",(0,r.kt)("inlineCode",{parentName:"li"},"MX_TouchGFX_Process"),")"),(0,r.kt)("li",{parentName:"ol"},"\u542f\u52a8\u8c03\u5ea6\u5668")),(0,r.kt)("p",null,"\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Process"),"\uff0c\u4ee5\u542f\u52a8\u4efb\u52a1\u5904\u7406\u7a0b\u5e8f\u4e2d\u7684TouchGFX Engine\u4e3b\u5faa\u73af\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"void\xa0MX_TouchGFX_Process(void);\n")),(0,r.kt)("h3",k({},{id:"additional-features"}),"\u5176\u5b83\u529f\u80fd"),(0,r.kt)("h4",k({},{id:"external-data-reader"}),"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668"),(0,r.kt)("p",null,"\u5bf9\u4e8eRGB565\u5e27\u7f13\u51b2\u50cf\u7d20\u683c\u5f0f\uff0ctouchgfx\u652f\u6301\u6240\u8c13\u7684",(0,r.kt)("em",{parentName:"p"},"\u6570\u636e\u8bfb\u53d6\u5668"),"\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u4f7f\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u76f4\u63a5\u4ece\u975e\u5b58\u50a8\u5668\u6620\u5c04\u4e32\u884c\u95ea\u5b58\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u65e0\u9700\u8fdb\u884c",(0,r.kt)("a",k({parentName:"p"},{href:"../ui-development/touchgfx-engine-features/caching-bitmaps"}),"\u7f13\u5b58"),"\uff0c\u5f53\u7136\u8fd9\u9700\u8981\u589e\u52a0\u989d\u5916\u7684\u7f13\u51b2\u5b58\u50a8\u533a\u3002 \u6709\u5173\u5982\u4f55\u5b9e\u73b0DataReader\uff0c\u4ece\u975e\u5b58\u50a8\u6620\u5c04\u95ea\u5b58\u82af\u7247\u4e2d\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f\u8d44\u6e90\u7684\u793a\u4f8b\uff0c\u8bf7\u53c2\u89c1",(0,r.kt)("a",k({parentName:"p"},{href:"../scenarios/using-serial-flash"}),"SerialFlash"),"\u6587\u7ae0\u3002"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"\u6570\u636e\u8bfb\u53d6\u5668"),"\u9009\u9879\u901a\u5e38\u7528\u4e8e\u6ca1\u6709\u8db3\u591f\u7684\u5185\u5b58\u7528\u4e8e\u989d\u5916\u7f13\u51b2\u533a\u7684\u4f4e\u6210\u672c\u89e3\u51b3\u65b9\u6848(\u5982STM32G0) \u3002 \u5982\u679cDMA2D\u4f7f\u80fd\u4e86\uff0c\u5219\u65e0\u6cd5\u4f7f\u80fd\u8be5\u9009\u9879\u3002"),(0,r.kt)("p",null,"\u4e00\u65e6",(0,r.kt)("em",{parentName:"p"},"RGB565"),"\u9009\u4f5c\u5e27\u7f13\u51b2\u50cf\u7d20\u683c\u5f0f\u540e\uff0c",(0,r.kt)("em",{parentName:"p"},"\u9644\u52a0\u529f\u80fd"),"\u7ec4\u5c06\u53d8\u5f97\u53ef\u7528\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/additional-features-data-reader.png",width:"520",noShadow:!0,mdxType:"Figure"},"\u5176\u5b83\u529f\u80fd\uff1a\u6570\u636e\u8bfb\u53d6\u5668"),(0,r.kt)("p",null,"\u5f00\u53d1\u4eba\u5458\u53ef\u8fdb\u884c\u4ee5\u4e0b\u914d\u7f6e\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668\uff1a"),"\u4f7f\u80fd\u6216\u7981\u7528\u529f\u80fd\u3002 \u5982\u679c\u4f7f\u80fd\uff0cTouchGFX\u5c06\u76f4\u63a5\u901a\u8fc7\u751f\u6210\u7684\u63a5\u53e3\u68c0\u7d22\u5e94\u7528\u8d44\u6e90\u3002 \u5982\u679c\u7981\u7528\uff0c\u5219\u5f00\u53d1\u4eba\u5458\u9700\u8981\u5c06\u56fe\u7247\u8d44\u6e90",(0,r.kt)("em",{parentName:"li"},"\u7f13\u5b58"),"\u5230\u5185\u5b58\u7f13\u51b2\u533a\u4e2d\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668\uff1a\u884c\u7f13\u51b2\u533a\u5927\u5c0f\uff1a"),"\u521b\u5efa\u4e24\u4e2a\u7f13\u51b2\u533a\uff0c\u4ee5\u4fbf\u5c06\u56fe\u50cf\u6216\u6587\u672c\u6df7\u5408\u5230\u5e27\u7f13\u51b2\u4e2d\u3002 \u9ed8\u8ba4\u503c\u4e3a\u4e00\u4e2a\u5c4f\u5e55\u5bbd\u5ea6*4\u5b57\u8282\uff0c\u4ee5\u652f\u6301ARGB8888\u50cf\u7d20\u683c\u5f0f\u7684\u5168\u5c3a\u5bf8\u56fe\u50cf\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668\uff1a\u6700\u5c0fDMA\u4f20\u8f93\u5927\u5c0f\uff1a"),"\u8bbe\u7f6e\u542f\u52a8DMA\u4f20\u8f93\u6240\u9700\u7684\u6700\u5c0f\u5b57\u8282\u3002 \u5982\u679c\u8bf7\u6c42\u4f20\u8f93\u7684\u5b57\u8282\u66f4\u5c11\uff0c\u5c06\u4e0d\u4f7f\u7528DMA\u3002")),(0,r.kt)("p",null,"\u5728\u4f7f\u80fd",(0,r.kt)("em",{parentName:"p"},"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668"),"\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u4ee3\u7801\u540e\uff0c\u5c06\u521b\u5efa\u4ee5\u4e0b\u9644\u52a0\u6587\u4ef6\uff0c\u4ee5\u652f\u6301\u76f4\u63a5\u4ece\u975e\u5b58\u50a8\u5668\u6620\u5c04\u95ea\u5b58\u4e2d\u68c0\u7d22\u56fe\u7247\u8d44\u6e90\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedDataReader.cpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedDataReader.hpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/TouchGFXDataReader.cpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/TouchGFXDataReader.hpp"))),(0,r.kt)("p",null,"\u50cf\u5f80\u5e38\u4e00\u6837\uff0c\u5bf9\u4e8eTouchGFX Generator\u751f\u6210\u7684\u4ee3\u7801\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedDataReader"),"\u4e3a\u53ea\u8bfb\uff0c\u7528\u6237\u4fee\u6539\u5e94\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXDataReader"),"\u7c7b\u4e2d\u8fdb\u884c\u3002 ",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedDataReader"),"\u7684\u7c7b\u578b\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"touchgfx::FlashDataReader"),"\u3002"),(0,r.kt)("p",null,"\u5c06TouchGFX HAL\u914d\u7f6e\u4e3a\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"DataReader"),"\uff0c\u5e76\u5bf9\u4ee5\u4e0b\u6587\u4ef6\u8fdb\u884c\u4fee\u6539\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXConfiguration.cpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedHAL.cpp")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedHAL.hpp"))),(0,r.kt)(o.Z,{mdxType:"Note"},"\u4ec5\u5f53\u7981\u7528DMA2D\u548cLTDC\u65f6\uff0cDataReader\u9644\u52a0\u529f\u80fd\u624d\u53ef\u7528\u3002"),(0,r.kt)("h4",k({},{id:"8bit-ltdc-color-look-up-table"}),"8bit LTDC Color Look-up Table"),(0,r.kt)("p",null,"When the LTDC is configured to read the framebuffer in L8 format and TouchGFX renders in either ",(0,r.kt)("a",k({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___a_b_g_r2222"}),"ABRG2222"),", ",(0,r.kt)("a",k({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___a_r_g_b2222"}),"ARGB222"),", ",(0,r.kt)("a",k({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___b_g_r_a2222"}),"BGRA2222"),", or ",(0,r.kt)("a",k({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___r_g_b_a2222"}),"RGBA2222"),", TouchGFX Generator will provide a CLUT which is loaded into the LTDC during ",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXHAL::initialize()"),". Please refer to the STM32 MCU reference manual for more details on usage of LTDC and CLUT."),(0,r.kt)("h2",k({},{id:"video-decoding"}),"Video Decoding"),(0,r.kt)("p",null,"The Video Decoding section allows developers to enhance the TouchGFX HAL with either hardware or software video decoding capabilities."),(0,r.kt)("p",null,"Video Decoding is only available with RGB565 (16bpp) and RGB888 (24bpp) framebuffer pixel formats. If neither of these formats are selected the Video Decoding section will not be available."),(0,r.kt)(o.Z,{mdxType:"Note"},"Not all MCUs support hardware video decoding."),(0,r.kt)("h3",k({},{id:"video-decoding-type"}),"Type"),(0,r.kt)("p",null,'By default the "Type" of video Decoding is disabled. If the required peripherals are not enabled in STM32CubeMX both "Software" and "Hardware" will be greyed out. Hover the mouse over the greyed out options the see which peripherals are required.'),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-dependecies-info-box.png",width:"800",mdxType:"Figure"},'Info box showing Video Type dependencies for "Hardware"'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Software"),' - If LIBJPEG is enabled under the Middleware section in STM32CubeMX the "Software" option can be selected and the software decoder will be generated. This means that TouchGFX Generator will generate a software MJPEG decoder.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Hardware"),' - If JPEG is enabled under the Multimedia section and a CMSIS compliant RTOS is selected in the TouchGFX Generator the "Hardware" option can be selected.')),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-options-4-18.png",width:"800",mdxType:"Figure"},"Video decoding type options"),(0,r.kt)("p",null,'In the LIBJPEG settings the RGB ordering in the "RGB scanline format"-section has to be set to "BGR" instead of "RGB" for efficiency. The number of bytes per pixel must be set to 3.'),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/libjpeg-rgb-ordering.png",width:"700",mdxType:"Figure"},"Required LIBJPEG RGB scanline format settings"),(0,r.kt)("p",null,"When working with hardware decoding the RGB format in the JPEG settings has to be the same as the display."),(0,r.kt)(i.Z,{mdxType:"FurtherReading"},"See section ",(0,r.kt)(c.Z,{to:"scenarios/scenarios-video-decoding",mdxType:"Link"},"Scenarios")," for concrete examples of code for different video decoding scenarios."),(0,r.kt)("h3",k({},{id:"video-decoding-number"}),"Concurrent videos"),(0,r.kt)("p",null,'The "Concurrent Videos" option is the largest amount of videos being decoded simultainously on the same screen in the GUI at any given time. If you only wish to decode one video on a screen the "Number of Videos" can be set to 1.'),(0,r.kt)("p",null,"A maximum of 4 videos can be decoded simultaneously."),(0,r.kt)("h3",k({},{id:"video-decoding-strategy"}),"Strategy"),(0,r.kt)("p",null,"The developer has three options when it comes to the video decoding strategy."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Direct to Framebuffer"),' - The video is decoded in the UI thread. It is slower than the other strategies. When working with hardware video decoding the "Direct to Framebuffer" option is unavailable.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Single Buffer")," - Video is decoded in a seperate task in a dedicated buffer. This buffer is allocated in internal memory."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Double Buffer")," - Video is decoded in a seperate task in two dedicated buffers for better performances at the cost of memory.")),(0,r.kt)("p",null,"When working with the single or double framebuffer strategy it is necessary to enable a CMSIS compliant OS."),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-rtos-requirement-info-box.png",width:"750",mdxType:"Figure"},"Info box about CMSIS RTOS requirement"),(0,r.kt)(o.Z,{mdxType:"Note"},"Pay attention to the memory consumption when working with the double buffer strategy."),(0,r.kt)(i.Z,{mdxType:"FurtherReading"},"See section ",(0,r.kt)(c.Z,{to:"scenarios/scenarios-video-decoding",mdxType:"Link"},"Scenarios")," for a concrete example of configuring FreeRTOS for video decoding."),(0,r.kt)("h3",k({},{id:"decode-format"}),"Decode Format"),(0,r.kt)("p",null,"For Software decoding, developers can choose the pixel format of the RGB buffer regardless of the pixel format of the framebuffer. TouchGFX Generator generates code that allows ChromART to do pixel-format-conversion between the formats if they're different. Having the video decoding buffer in RGB565 allows developers to have a smaller memory footprint."),(0,r.kt)(a.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-decode-format.png",width:"700",mdxType:"Figure"},"Decode format"),(0,r.kt)("h3",k({},{id:"video-decoding-buffer-size"}),"Buffer size"),(0,r.kt)("p",null,"The buffer width and height settings must correspond to the largest video dimension in the application. The width must be divisible by 32."),(0,r.kt)("p",null,"The following code is the generated code in ",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedHAL.cpp"),' for an application using an RGB888 display with a 480*272 video and the "Single Buffer" video decoding strategy.'),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},"TouchGFXGeneratedHAL.cpp"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"\n#include <DedicatedBufferVideoController.hpp>\n#include <SoftwareMJPEGDecoder.hpp>\n\nuint32_t lineBuffer[480];\n\nSoftwareMJPEGDecoder mjpegdecoder1((uint8_t*)lineBuffer);\n\nuint32_t videoRGBBuffer[97920];\nDedicatedBufferController<1, 480, 272, 480*3U, Bitmap::RGB888> videoController;\n\n//Singleton Factory\nVideoController& VideoController::getInstance()\n{\n    return videoController;\n}\n\nvoid TouchGFXGeneratedHAL::initialize()\n{\n    HAL::initialize();\n    registerEventListener(*(Application::getInstance()));\n    setFrameBufferStartAddresses((void*)frameBuf, (void*)(frameBuf + sizeof(frameBuf) / (sizeof(uint32_t) * 2)), (void*)0);\n\n    /*\n     * Add software decoder to video controller\n     */\n    videoController.addDecoder(mjpegdecoder1, 0);\n\n    videoController.setRGBBuffer((uint8_t*)videoRGBBuffer, sizeof(videoRGBBuffer));\n}\n")),(0,r.kt)("h2",k({},{id:"generated-project"}),"\u751f\u6210\u7684\u9879\u76ee"),(0,r.kt)("p",null,"TouchGFX works with (at least) the following IDEs when generating code using the ",(0,r.kt)("strong",{parentName:"p"},"Generate Code")," button in STM32CubeMX:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"EWARM"),(0,r.kt)("li",{parentName:"ol"},"MDK-ARM"),(0,r.kt)("li",{parentName:"ol"},"STM32CubeIDE")),(0,r.kt)("p",null,"\u8981\u83b7\u5f97\u6700\u4f18\u9879\u76ee\u7ed3\u6784\uff0c\u8bf7\u9009\u62e9\u4ee5\u4e0b\u9879\u76ee\u751f\u6210\u9009\u9879\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5e94\u7528\u7ed3\u6784\uff1a",(0,r.kt)("strong",{parentName:"li"},"\u9ad8\u7ea7")),(0,r.kt)("li",{parentName:"ul"},"\u7981\u7528",(0,r.kt)("strong",{parentName:"li"},"\u5728\u6839\u4e0b\u751f\u6210"),"(\u4ec5\u9650STM32CubeIDE)")),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/project-manager.png",noShadow:!1,mdxType:"Figure"},"\u9009\u62e9\u201c\u9ad8\u7ea7\u5e94\u7528\u7ed3\u6784\u201d\uff0c\u7136\u540e\u53d6\u6d88\u9009\u62e9\u201c\u5728\u6839\u4e0b\u751f\u6210\u201d"),(0,r.kt)("p",null,"STM32CubeMX will also generate a ",(0,r.kt)("em",{parentName:"p"},"TouchGFX")," folder with the following structure:"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/folder-b.png",noShadow:!1,mdxType:"Figure"},"TouchGFX\u6587\u4ef6\u5939\u7ed3\u6784"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"\u5e94\u7528"),"\u6587\u4ef6\u5939\uff0c\u5305\u542b\u7528\u4e8e\u521d\u59cb\u5316\u548c\u542f\u52a8TouchGFX\u7684\u4ee3\u7801\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"\u76ee\u6807"),"\u6587\u4ef6\u5939\uff0c\u5305\u542b\u751f\u6210\u7684\u53ea\u8bfb\u4ee3\u7801(\u5728\u5185\u90e8\u751f\u6210) \u548c\u53ef\u66f4\u6539\u7684\u7528\u6237\u7c7b(",(0,r.kt)("inlineCode",{parentName:"li"},"STM32TouchController.cpp"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFXGPIO.cpp"),"\u548c",(0,r.kt)("inlineCode",{parentName:"li"},"TouchGFXHAL.cpp"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},".part"),"\u6587\u4ef6\uff0c\u4f7f\u7528TouchGFX Designer\u6765\u6253\u5f00\uff0c\u4ee5\u4fbf\u521b\u5efa\u5b8c\u6574\u7684TouchGFX\u9879\u76ee\uff0c\u5176\u4e2d\u5305\u62ecTouchGFX\u5934\u6587\u4ef6\u548c\u5e93\u3002part\u6587\u4ef6\u5305\u542b\u8bbe\u8ba1\u4eba\u5458\u5728\u751f\u6210TouchGFX\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u65f6\u4f7f\u7528\u7684\u76f8\u5173\u7a0b\u5e8f\u4fe1\u606f\uff0c\u5982\u50cf\u7d20\u683c\u5f0f\u548c\u5c4f\u5e55\u5c3a\u5bf8\u3002")),(0,r.kt)("h2",k({},{id:"touchgfx-designer-project"}),"TouchGFX Designer\u9879\u76ee"),(0,r.kt)("p",null,"The following json structure is an example of the contents of the ",(0,r.kt)("inlineCode",{parentName:"p"},".part")," file mentioned in the ",(0,r.kt)("a",k({parentName:"p"},{href:"#generated-code-architecture"}),"Generated Code Architecture")," section for a project based on STM32U599. The post-generate command in the example below will update the project selected by the user in STM32CubeMX Project Manager tab (e.g. EWARM) with required libraries for TouchGFX and optional components as well as new files created by TouchGFX designer (e.g. new screens and assets)."),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-json"}),'{\n  "Application": {\n    "Name": "STM32U599J-DK",\n    "TouchGfxPath": "../Middlewares/ST/touchgfx",\n    "AvailableColorDepths": [ 24 ],\n    "AvailableLCDs":\n    {\n      "24": "LCDGPU2D"\n    },\n    "AvailableResolutions": [\n      {\n        "Width": 480,\n        "Height": 480\n      }\n    ],\n    "PostGenerateTargetCommand": "touchgfx update_project",\n    "Family": "STM32U5",\n    "SubFamily": "STM32U599/5A9",\n    "Platform": "m33",\n    "ProjectFile": "../STM32U599J-DK.ioc",\n    "OptionalComponentsRoot": "../Middlewares/ST/touchgfx_components",\n    "OptionalComponents": [\n      "GPU2D"\n    ]\n  },\n  "Version": "4.19.0"\n}\n')),(0,r.kt)("p",null,"\u4f7f\u7528TouchGFX Designer\u6253\u5f00",(0,r.kt)("em",{parentName:"p"},".part"),"\u6587\u4ef6\u65f6\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u9009\u62e9\u52a0\u8f7d\u73b0\u5b58UI\u6216\u4ece\u7a7a\u767d\u6a21\u677f\u5f00\u59cb\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/choose-ui-4-17.png",noShadow:!1,mdxType:"Figure"},"\u9009\u62e9UI"),(0,r.kt)("p",null,"\u6309\u4e0bTouchGFX Designer\u4e2d\u7684",(0,r.kt)("em",{parentName:"p"},"\u751f\u6210\u4ee3\u7801"),"\u540e\uff0cTouchGFX\u6587\u4ef6\u5939\u7684\u7ed3\u6784\u5982\u4e0b\u6240\u793a\u3002 \u4e0b\u56fe\u663e\u793a\u4e86TouchGFX\u6587\u4ef6\u5939\u7ed3\u6784\u7684\u5177\u4f53\u793a\u4f8b\uff0c\u5e76\u7740\u91cd\u663e\u793a\u4e86\u751f\u6210\u540e\u7684\u65b0\u6587\u4ef6\u53ca\u6587\u4ef6\u5939\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/designer-gen-code-4-17.png",noShadow:!1,mdxType:"Figure"},"Generate Code"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/post-designer-generation.png",noShadow:!1,mdxType:"Figure"},"TouchGFX\u6587\u4ef6\u5939\u7ed3\u6784"),(0,r.kt)("p",null,"TouchGFX will detect the selected IDE from the .ioc STM32CubeMX file (For STM32CubeIDE, EWARM, MDK-ARM) and update the project file with new, generated files like files for screen definitions, image- and font assets."),(0,r.kt)("p",null,"At this point, developers can work interchangeably in STM32CubeMX, TouchGFX Designer and toolchain/IDE where:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"STM32CubeMX updates the IDE project with drivers"),(0,r.kt)("li",{parentName:"ul"},"STM32CubeMX updates the TouchGFX ",(0,r.kt)("em",{parentName:"li"},".part")," file with UI related changes that are instantly picked up by the designer"),(0,r.kt)("li",{parentName:"ul"},"STM32CubeMX generates HAL code (TouchGFX/target/generated/) based on TouchGFX Generator Configuration necessary for TouchGFX to work on a specific platform."),(0,r.kt)("li",{parentName:"ul"},"TouchGFX Designer\u4f7f\u7528\u751f\u6210\u7684\u4ee3\u7801\u6765\u66f4\u65b0\u9879\u76ee\u3002")),(0,r.kt)(o.Z,{mdxType:"Note"},'For Dual-Core projects, having enabled TouchGFX for a specific context, the TouchGFX project will usually be located in a dedicated folder for that context, e.g. "CM4/TouchGFX" or "CM7/TouchGFX".'),(0,r.kt)("h2",k({},{id:"modifying-generated-behavior"}),"\u4fee\u6539\u751f\u6210\u6587\u4ef6"),(0,r.kt)("p",null,"It important to know that, due to the class hierarchy of the HAL, users can override HAL configuration or behavior that was generated by STM32CubeMX. \u5728\u4ee5\u4e0b\u793a\u4f8b\u4e2d\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u4fee\u6539",(0,r.kt)("inlineCode",{parentName:"p"},"\u521d\u59cb\u5316"),"\u51fd\u6570\uff0c\u4ee5\u989d\u5916\u914d\u7f6eTouchGFX\uff0c\u6216\u4fee\u6539",(0,r.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedHAL"),"\u4e2d\u73b0\u6709\u7684\u914d\u7f6e\u96c6\u3002"),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},"TouchGFXHAL.cpp"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{className:"language-cpp"}),"void TouchGFXHAL::initialize()\n{\n    // Calling parent implementation of initialize().\n    //\n    // To overwrite the generated implementation, omit call to parent function\n    // and implemented needed functionality here.\n    // Please note, HAL::initialize() must be called to initialize the framework.\n\n    TouchGFXGeneratedHAL::initialize();\n\n    //Overriding configurations\n    hal.lockDMAToFrontPorch(true);\n    hal.setFingerSize(4);\n    hal....\n}\n")),(0,r.kt)("h2",k({},{id:"upgrading-projects"}),"\u5347\u7ea7\u9879\u76ee"),(0,r.kt)("p",null,"TouchGFX Generator parameters are stored in .ioc files (STM32CubeMX project). \u5f53\u53d1\u5e03\u65b0\u7248TouchGFX Generator\u65f6\uff0c\u65e7\u7248\u7684\u53c2\u6570\u53ef\u80fd\u4e0e\u65b0\u7248\u7684\u53c2\u6570\u4e0d\u517c\u5bb9\uff0c\u5e76\u53ef\u80fd\u9700\u8981\u79fb\u690d\u3002"),(0,r.kt)("p",null,"Since STM32CubeMX does not support upgrading between X-CUBE versions the upgrade is automatically performed by TouchGFX Designer when ",(0,r.kt)("em",{parentName:"p"},"Generate Code")," is pressed due to the following command in the ",(0,r.kt)("inlineCode",{parentName:"p"},"PostGenerateTargetCommand")," section of the ",(0,r.kt)("inlineCode",{parentName:"p"},".touchgfx")," file."),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},".touchgfx"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{}),'"PostGenerateTargetCommand" : "touchgfx update_project --project-file=../upgrade.ioc --platform=m7"\n')),(0,r.kt)("p",null,"\u8be5\u547d\u4ee4\u5c06\u8bfb\u53d6",(0,r.kt)("inlineCode",{parentName:"p"},".ioc"),"\u6587\u4ef6\u5e76\u66f4\u65b0\u53c2\u6570\uff0c\u4ee5\u9002\u5e94X-CUBE-TOUCHGFX\u7684\u5f53\u524d\u7248\u672c\u3002 \u4ee5\u4e0b\u662f\u901a\u8fc7X-CUBE-TOUCHGFX 4.13.0\u521b\u5efa\u7684.ioc\u6587\u4ef6\u4e0a\u624b\u52a8\u8fd0\u884c\u811a\u672c\uff08X-CUBE-TOUCHGFX 4.14.0\uff09\u7684\u793a\u4f8b\u3002"),(0,r.kt)(l.Z,{mdxType:"CodeHeader"},"\u4f7f\u7528STM32F746 DISCO\u5e94\u7528\u6a21\u677f\u4ece4.13.0\u5347\u7ea7\u52304.14.0\u7684\u793a\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",k({parentName:"pre"},{}),"$ touchgfx update_project --project-file=../STM32F746G_DISCO.ioc\n  TouchGFX Generator 4.13.0 found\n  Creating backup of ../STM32F746G_DISCO.ioc as\n../backup_STM32F746G_DISCO.ioc\n  Performing upgrade 4.13.0 -> 4.14.0 ... OK\n")),(0,r.kt)("p",null,"Opening the updated project with STM32CubeMX prompts the user to install the version of X-CUBE-TOUCHGFX that is represented by the .ioc file (if not already installed). \u70b9\u51fb",(0,r.kt)("em",{parentName:"p"},"\u7acb\u5373\u4e0b\u8f7d"),"\u540e\u5c06\u4e0b\u8f7d\u5e76\u5b89\u88c5X-Cube-TouchGFX-4.14.0\u3002"),(0,r.kt)(a.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/cubemx-additional-software-manager-settings-missing-x-cube-touchgfx-4.14.0.png",noShadow:!1,mdxType:"Figure"},"\u7f3a\u5931\u7684\u5176\u4ed6\u8f6f\u4ef6\u7ec4\u4ef6\uff1aTouchGFX Generator 4.14.0"),(0,r.kt)("p",null,"\u5347\u7ea7\u671f\u95f4\u5c06\u4fdd\u7559TouchGFX Generator\u4e2d\u7684\u6240\u6709\u914d\u7f6e\uff0c.ioc\u6587\u4ef6\u7684\u5907\u4efd\u6587\u4ef6\u5c06\u88ab\u653e\u5728\u539f\u59cb\u6587\u4ef6\u65c1\uff0c\u5e76\u5e26\u6709\u524d\u7f00",(0,r.kt)("inlineCode",{parentName:"p"},"backup_"),"\u3002"),(0,r.kt)(o.Z,{mdxType:"Note"},"To use the new features provided by TouchGFX Generator, ",(0,r.kt)("i",null,"Generate Code")," must be performed in STM32CubeMX."),(0,r.kt)(d.Z,{mdxType:"Caution"},"If upgrading X-CUBE-TOUCHGFX through STM32CubeMX for an existing TouchGFX Project and the upgrade process is not run by TouchGFX Designer, TouchGFX Generator parameters will be reset to default since they are applicable to a different version."))}S.isMDXComponent=!0}}]);