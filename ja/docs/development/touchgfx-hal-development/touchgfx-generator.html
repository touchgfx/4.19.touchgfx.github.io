<!doctype html>
<html class="docs-version-current" lang="ja" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.19/ja/opensearch.xml">
<script src="/4.19/js/fix-location.js"></script><title data-react-helmet="true">Generatorユーザ･ガイド | TouchGFX Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://support.touchgfx.com/4.19/ja/img/meta-image.png"><meta data-react-helmet="true" name="twitter:image" content="https://support.touchgfx.com/4.19/ja/img/meta-image.png"><meta data-react-helmet="true" property="og:url" content="https://support.touchgfx.com/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-generator"><meta data-react-helmet="true" name="docsearch:language" content="ja"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Generatorユーザ･ガイド | TouchGFX Documentation"><meta data-react-helmet="true" name="description" content="TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is a STM32CubeMX Additional-Software component that helps developers configure TouchGFX to run on their hardware platform. Based on existing STM32CubeMX settings and user input TouchGFX Generator will generate the files required to configure a working TouchGFX application. ここには、TouchGFX HAL、TouchGFX OSAL、およびTouchGFXの設定ファイルが含まれています。"><meta data-react-helmet="true" property="og:description" content="TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is a STM32CubeMX Additional-Software component that helps developers configure TouchGFX to run on their hardware platform. Based on existing STM32CubeMX settings and user input TouchGFX Generator will generate the files required to configure a working TouchGFX application. ここには、TouchGFX HAL、TouchGFX OSAL、およびTouchGFXの設定ファイルが含まれています。"><link data-react-helmet="true" rel="shortcut icon" href="/4.19/ja/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://support.touchgfx.com/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-generator"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/docs/development/touchgfx-hal-development/touchgfx-generator" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/ko/docs/development/touchgfx-hal-development/touchgfx-generator" hreflang="ko"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-generator" hreflang="ja"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/zh-CN/docs/development/touchgfx-hal-development/touchgfx-generator" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/zh-TW/docs/development/touchgfx-hal-development/touchgfx-generator" hreflang="zh-TW"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/docs/development/touchgfx-hal-development/touchgfx-generator" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.19/ja/assets/css/styles.321a00f7.css">
<link rel="preload" href="/4.19/ja/assets/js/runtime~main.e56c57b7.js" as="script">
<link rel="preload" href="/4.19/ja/assets/js/main.be677927.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.19/ja/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.19/ja/img/logo.svg" alt="TouchGFX" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/4.19/ja/img/logo.svg" alt="TouchGFX" class="themedImage_1VuW themedImage--dark_hz6m"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link"><span><span>日本語</span></span></a><ul class="dropdown__menu"><li><a href="/4.19/docs/development/touchgfx-hal-development/touchgfx-generator" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/4.19/ko/docs/development/touchgfx-hal-development/touchgfx-generator" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">한국어</a></li><li><a href="/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-generator" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">日本語</a></li><li><a href="/4.19/zh-CN/docs/development/touchgfx-hal-development/touchgfx-generator" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">简体中文</a></li><li><a href="/4.19/zh-TW/docs/development/touchgfx-hal-development/touchgfx-generator" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/4.19/ja/docs/introduction/welcome">4.19</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-generator">4.19</a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_1ZXk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">概要</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Basic Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/development-introduction">開発の概要</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ハードウェアの選択</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ボード立ち上げ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">TouchGFX AL（抽象化レイヤ）開発</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL（抽象化レイヤ）開発の概要</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-architecture">抽象化レイヤ･アーキテクチャ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-generator">Generatorユーザ･ガイド</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Scenarios</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">UI開発</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Scenarios</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Miscellaneous</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Resources</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Generatorユーザ･ガイド</h1></header><p>TouchGFX Generator, a part of X-CUBE-TOUCHGFX, is a STM32CubeMX Additional-Software component that helps developers configure TouchGFX to run on their hardware platform. Based on existing STM32CubeMX settings and user input TouchGFX Generator will generate the files required to configure a working TouchGFX application. ここには、TouchGFX HAL、TouchGFX OSAL、およびTouchGFXの設定ファイルが含まれています。</p><p>Once code is generated through STM32CubeMX, the TouchGFX project can be opened through TouchGFX Designer where the UI is developed. TouchGFX Designer automatically adds any additional generated code files to the target IDE project that was configured for the project in STM32CubeMX.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="enabling-touchgfx-generator">TouchGFX Generatorの有効化<a aria-hidden="true" class="hash-link" href="#enabling-touchgfx-generator" title="Direct link to heading">​</a></h2><p>Users gain access to adding functionality from X-CUBEs by pressing the &quot;Select Components&quot; button.</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/enable-generator.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/enable-generator.png"></a><p>Selecting Additional Software in STM32CubeMX</p></div><p>次の図は、プロジェクトに対してTouchGFX Generatorを有効化する方法を示しています。</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/add-generator-v4.17.png" target="_blank"><img width="580" src="/4.19/ja/img/development/touchgfx-hal-development/add-generator-v4.17.png"></a><p>TouchGFX Generatorの有効化</p></div><p>If enabling TouchGFX for a Dual-Core MCU, be sure to enable for the the correct context. TouchGFX can only be enabled for a single context:</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/add-generator-dual-core-v4.17.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/add-generator-dual-core-v4.17.png"></a><p>Enabling TouchGFX Generator for Dual Core</p></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="generated-code-architecture">生成されるコードのアーキテクチャ<a aria-hidden="true" class="hash-link" href="#generated-code-architecture" title="Direct link to heading">​</a></h2><p>TouchGFX Generatorの機能の説明の前に、生成されるコードのアーキテクチャと、開発者がそれを使用して設定や動作をカスタマイズする方法について理解することが重要です。</p><p>Handwritten user code in files generated by STM32CubeMX is protected through the use of <strong>User Code</strong> sections placed strategically throughout the code generated by STM32CubeMX (C code). TouchGFX Generator（C++コード）で生成されるコードでは、この柔軟性が保持されています。</p><p>When TouchGFX Generator is added through <em>Additional Software</em> and enabled, STM32CubeMX will always create a <em>TouchGFX</em> folder for the project. The folder always contains the same files, regardless of configuration, while the content of the files changes according to STM32CubeMX and User configuration.</p><p>The listing below shows an overview of the content of a STM32CubeMX project with TouchGFX Generator <em>enabled</em>, with emphasis on TouchGFX related files. リストの後の表は、最も重要なエントリの役割を概説しています。</p><div class="code-header"><div><h5>TouchGFX フォルダ</h5></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   .mxproject</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   myproject.ioc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├───Core</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├───Drivers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├───EWARM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├───Middlewares</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└───TouchGFX</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │   ApplicationTemplate.touchgfx.part</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ├───App</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │       app_touchgfx.c</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │       app_touchgfx.h</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    └───target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   STM32TouchController.cpp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   STM32TouchController.hpp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   TouchGFXGPIO.cpp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   TouchGFXHAL.cpp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   TouchGFXHAL.hpp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        └───generated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                OSWrappers.cpp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                TouchGFXConfiguration.cpp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                TouchGFXGeneratedHAL.cpp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                TouchGFXGeneratedHAL.hpp</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><table><thead><tr><th>フォルダ</th><th>Responsibility</th></tr></thead><tbody><tr><td>myproject.ioc</td><td>STM32CubeMX Project file</td></tr><tr><td>Core</td><td><code>main.c</code> と起動コード</td></tr><tr><td>Drivers</td><td>CMSISとマイクロコントローラ･ファミリのドライバ</td></tr><tr><td>EWARM</td><td>IDEプロジェクト･フォルダ。 EWARM、MDK-ARM、STM32CubeIDEのいずれか</td></tr><tr><td>Middlewares</td><td>TouchGFXライブラリ / ヘッダファイルと、サードパーティ･ソフトウェア（FreeRTOSなど）が含まれます。</td></tr><tr><td>ApplicationTemplate.touchgfx.part</td><td>The .part file is updated by STM32CubeMX with information that is relevant to TouchGFX Designer project, e.g. screen dimensions and bit depth</td></tr><tr><td>App</td><td>X-CUBE interface to STM32CubeMX. <code>app_touchgfx.c</code> には、関数<code>MX_TouchGFX_Process(void)</code>および <code>MX_TouchGFX_Init(void)</code> の定義が含まれます。これらの関数はTouchGFXを初期化してメイン･ループを開始するために使用されます。</td></tr><tr><td>target/generated</td><td>This sub-folder contains the read-only files that get overwritten by STM32CubeMX when configurations change. <code>TouchGFXGeneratedHAL.cpp</code> is a sub-class of the TouchGFX class <code>HAL</code> and contains the code that STM32CubeMX can generate based on its current configuration. <code>OSWrappers.cpp</code>OSAL）にはTouchGFXエンジンとの同期に必要な関数が含まれます。最後に<code>TouchGFXConfiguration.cpp</code> には、TouchGFXの構築および設定のためのコードが含まれます（HALを含む）。</td></tr><tr><td>target</td><td>Contains the bulk of files that can be modified by the user to extend the behavior of the HAL or to override configurations generated by STM32CubeMX. <code>STM32TouchController.cpp</code>には、空のタッチ･コントローラ･インタフェースが含まれます。 <code>TouchGFXHAL.cpp</code> は、<code>TouchGFXGeneratedHAL</code>のサブクラス<code>TouchGFXHAL</code>,を定義します。</td></tr></tbody></table><p><code>TouchGFXConfiguration.cpp</code>にはHALを構築する関数とTouchGFXのメイン･ループを開始する関数が含まれることを把握しておくことが重要です。 追加設定は、編集可能なユーザクラス<code>TouchGFXHAL</code>にて行うことができます。 HALの一般的なアーキテクチャは次のようになります。</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/code-architecture.png" target="_blank"><img width="200" src="/4.19/ja/img/development/touchgfx-hal-development/code-architecture.png"></a><p>Hierarchy of generated code</p></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="feature-overview">機能の概要<a aria-hidden="true" class="hash-link" href="#feature-overview" title="Direct link to heading">​</a></h2><p>Having enabled TouchGFX Generator, three main groups exist in the user interface. A fourth, &quot;Dependencies&quot;, will appear if a problem with the current configuration is detected.</p><ul><li><strong><em>Dependencies</em></strong> - このグループには依存関係、警告、または設定内の具体的なエラーに関する開発者への通知が含まれます。 エントリが存在しない場合、このグループは非表示になります。</li><li><strong><em>Display</em></strong> - このグループにはディスプレイに関連する設定（インタフェース、フレームバッファのビット深度、幅、高さなど）が含まれます。 これらの設定は、TouchGFXプロジェクトのキャンバスのサイズや、アセット用に生成されるコードに直接影響します。</li><li><strong><em>Driver</em></strong> - This group allows the user to opt-in for a number of ready-made drivers related to the tick source of the application, graphics acceleration (DMA2D and GPU2D) and RTOS. Since STM32CubeMX supports FreeRTOS (CMSIS RTOS v1 and v2) configurations, TouchGFX Generator provides drivers for each of these options.</li><li><strong><em>Additional Features</em></strong> - This group appears if RGB565 is selected, allowing the user to create am application using image- and font-data from non-memory mapped flash.</li><li><strong><em>Video Decoding</em></strong> - This group allows the user to enable hardware or software video decoding. This option is necessary to work with the video widget. Note that not all MCUs support video decoding.</li></ul><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/four-sections.png" target="_blank"><img width="600" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/four-sections.png"></a><p>TouchGFX Generator has three groups: Display, Driver and Video Decoding</p></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="display">Display<a aria-hidden="true" class="hash-link" href="#display" title="Direct link to heading">​</a></h2><p><em>Display</em> グループには、ディスプレイに関連する設定（インタフェース、寸法、バッファリング戦略など）が含まれます。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="interface-and-dimensions">インタフェースと寸法<a aria-hidden="true" class="hash-link" href="#interface-and-dimensions" title="Direct link to heading">​</a></h3><p>現在、STM32マイクロコントローラでは、次に示すような複数のディスプレイ･インタフェースを使用できます。</p><ul><li>Parallel RGB (LTDC)</li><li>MIPI DSI</li><li>FMC</li><li>SPI</li></ul><p>In the case of MCUs with a display connected to an LTDC or FMC <em>TouchGFX Generator</em> can generate code to transfer the framebuffer to the connected display. For DSI and SPI interfaces drivers must be implemented by developers themselves.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content">See section <a href="/4.19/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb">Scenarios</a> for concrete examples of code for different display interfaces.</div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="framebuffer-pixel-format">Framebuffer Pixel Format<a aria-hidden="true" class="hash-link" href="#framebuffer-pixel-format" title="Direct link to heading">​</a></h3><p>The following framebuffer pixel formats are currently supported by TouchGFX Generator. All options are available when using &quot;Custom&quot; display interface, otherwise options are restricted to display controller settings (e.g. configuring the LTDC Framebuffer format to &quot;RGB565&quot; will limit the options to &quot;RGB565&quot; in TouchGFX Generator).</p><ol><li>BW (1bpp)</li><li>Grey2 (2bpp)</li><li>Grey4 (4bpp)</li><li>ABRG2222 (8bpp)</li><li>ARGB2222 (8bpp)</li><li>BGRA2222 (8bpp)</li><li>RGBA2222 (8bpp)</li><li>RGB565 (16bpp)</li><li>RGB888 (24bpp)</li><li>ARGB8888 (32bpp)</li><li>XRGB8888 (32bpp)</li></ol><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">Some pixel formats have no- or only partial ChromART (DMA2D) support.</div></div><div class="highlight highlight-caution"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></div>Caution</h5></div><div class="highlight-content"><b>For STM32F7/H7</b>: If the framebuffer is placed in Write Through cached memory (e.g. SRAM) then the DCache is flushed by the generated code prior to DMA2D (if configured in the Generator) accessing it. Remember to enable <b>CPU Cache</b> in the <b>System Core</b> settings for <b>Cortex M7</b> in STM32CubeMX in order for this caching mechanic to work.</div></div><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content">See the <a href="/4.19/ja/docs/development/board-bring-up/how-to/02-cpu-running#cache-on-f7-and-h7">Cache on F7 and H7</a> subsection for more information about CPU caching.</div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="buffering-strategies">Buffering Strategies<a aria-hidden="true" class="hash-link" href="#buffering-strategies" title="Direct link to heading">​</a></h3><p>TouchGFX Generatorを介して、次のフレームバッファ戦略を設定できます。</p><ul><li><strong>Single Buffer</strong>- アプリケーション･フレームバッファを1つだけ使用します。 パフォーマンスが制限される可能性がありますが、メモリの使用量は少なくて済みます。 ［Buffer Location］設定で使用して、内部RAMに配置できます。 さらに最適化するには、ディスプレイ･コントローラによって現在処理されているラインを返す関数をユーザが定義できます。 この方法はフレームワークによって使用され、このフレームですでにディスプレイに転送済みのメモリへの更新ができるようになります。</li><li><strong>Double Buffer</strong> - 2つのフレームバッファを使用します。 通常、多くのメモリを必要としますが、パフォーマンスが向上します。</li><li><strong>Partial Buffer</strong>- 1つ以上のユーザ定義のメモリ領域をフレームバッファとして使用します。 この戦略は外部RAMに頼らないが、ディスプレイのフレームバッファ全体では使用可能なメモリ量を超える可能性がある場合の低コストのソリューションをターゲットにしています。</li></ul><p>シングル・バッファとダブル・バッファの場合、ユーザは［Buffer Location］設定で次のオプションを使用して場所を設定できます。</p><ul><li><strong>By Allocation</strong> - リンカがリンカ･スクリプトに従ってフレームバッファのメモリを配置できます。 デフォルトは内部RAMです。</li><li><strong>By Address</strong> - ユーザが1つ（シングル）または2つ（ダブル）のフレームバッファ･アドレスを定義できます。</li></ul><p><strong>パーシャル・バッファ</strong>戦略では、ユーザは以下のパラメータを定義できます。</p><ul><li>ブロック数(常に内部RAMに配置される)</li><li>ブロック･サイズ(バイト)</li></ul><p>パーシャル･バッファ戦略に関する中心的な概念を理解するには、パーシャル･フレームバッファを使用してメモリ要件を軽減する方法に関する<a href="/4.19/ja/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer">専門の記事</a>を参照してください。 この記事はパーシャル･フレームバッファを実現する方法を概念的に示したものなので、この記事に示すコードはTouchGFX Generatorによって生成されるコードと少し異なっています。 これらの戦略で生成されるコードの具体例については、「<a href="/4.19/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-framebuffer-strategies">フレームバッファ戦略</a>」を参照してください。</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="driver">Driver<a aria-hidden="true" class="hash-link" href="#driver" title="Direct link to heading">​</a></h2><p>［Driver］セクションでは、TouchGFX ALのさまざまな役割に対応するドライバを開発者が選択できます。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="application-tick-source">Application Tick Source<a aria-hidden="true" class="hash-link" href="#application-tick-source" title="Direct link to heading">​</a></h3><p>アプリケーションのティック･ソースは、アプリケーションを前進させる方法を定義します。 開発者は以下のオプションを使用できます。</p><ul><li><strong>LTDC</strong> - If LTDC is selected as the interface the &quot;Display&quot; group the Application Tick Source can be &quot;LTDC&quot;. つまり、TouchGFX Generatorが<code>TouchGFXGeneratedHAL</code> クラスにドライバ関数(LTDC割込みハンドラ)をインストールし、それが<code>OSWrappers::signalVSync()</code>.を呼び出してアプリケーションを前進させます。</li><li><strong>Custom and FMC</strong> - In this case, the developer is required to implement a handler that drives the application forward by calling <code>OSWrappers::signalVSync()</code> repeatedly.</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="graphics-accelerator">Graphics Accelerator<a aria-hidden="true" class="hash-link" href="#graphics-accelerator" title="Direct link to heading">​</a></h3><p>グラフィック･アクセラレーションに関して、開発者には次の3つのオプションがあります。</p><ul><li><strong>None</strong> - The application renders using only the CPU.</li><li><strong>DMA2D Accelerator (ChromART)</strong> - The application uses the ChromART chip when possible to move and blend pixels, freeing up CPU cycles. The driver is generated by TouchGFX Generator and does not require any action from the developer.</li></ul><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/multimedia-group-dma2d.png" target="_blank"><img width="200" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/multimedia-group-dma2d.png"></a><p>DMA2D is enabled in the *Multimedia* category in CubeMX, for MCUS that support it.</p></div><p>TouchGFX Generatorから提供されるChrom-ART（DMA2D）ドライバは、TransferCompleteInterruptの受信方法として次の2つをサポートしています。</p><ol><li>TM32Cube HALドライバを使用して、dma2dハンドラにコールバック関数<code>hdma2d.XferCpltCallback</code>を登録する。</li><li><code>DMA2D_IRQHandler()</code>割込みハンドラを直接使用する。</li></ol><p>Switching between these two is done by enabling or disabling the DMA2D global interrupt in the NVIC Settings in STM32CubeMX for DMA2D IP. グローバル割込みを有効化するとオプション1のコードが生成され、グローバル割込みを無効化するとオプション2のコードが生成されます。</p><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content"><li>When using global interrupt for DMA2D, ensure that the &quot;IRQ handler&quot; calls the &quot;DMA2D HAL handler&quot;. This is default behaviour.</li><li>グローバル割込みが有効で「IRQハンドラ」とDMA2Dの「HALハンドラの呼び出し」が無効になっている場合、登録されたコールバックが呼び出されません。</li></div></div><ul><li><strong>GPU2D (NeoChrom)</strong> is a graphics accelerator capable of accelerating many of the drawing operations in TouchGFX, including texture mapping. It supports framebuffers in RGB565, RGB888, and ARGB8888 formats.</li></ul><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/multimedia-group-gpu2d.png" target="_blank"><img width="190" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/multimedia-group-gpu2d.png"></a><p>GPU2D is enabled in the *Multimedia* category in CubeMX, for MCUS that support it.</p></div><div class="highlight highlight-caution"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></div>Caution</h5></div><div class="highlight-content">The GPU2D option is only visible if GPU2D has been enabled in the <i>Multimedia</i> section for your project in CubeMX. It is only available for STM32U599 devices and can only be enabled for use with TouchGFX if the ThreadX RTOS from the <i>Middlewares</i> section is also enabled.</div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="real-time-operating-system">Real-Time Operating System<a aria-hidden="true" class="hash-link" href="#real-time-operating-system" title="Direct link to heading">​</a></h3><p>開発者はTouchGFXで任意のRTOSを使用できます(OS無しも含む)。 「抽象化レイヤ･アーキテクチャ」で説明したように、TouchGFXエンジンはインタフェースを使用して、ユーザが選択したRTOSと、メイン･イベント･ループおよびフレームバッファのアクセスを同期させます。<code>OSWrappers</code> When developers choose an operating system in TouchGFX Generator, code will be generated to syncronize internally via primitives for the OS of choice. The operating system still has to be configured through STM32CubeMX to determine stack size, among other things.</p><p>FreeRTOS (CMSIS OS V1 and V2) and ThreadX (Native Middleware or Azure RTOS Software Packs) can be configured directly from within STM32CubeMX and TouchGFX Generator providing the user with generated code for both task definitions and TouchGFX RTOS driver. TouchGFX Generator can generate CMSIS V1 and CMSIS V2 compliant RTOS drivers which work with any CMSIS compliant RTOS, a driver for ThreadX, and a driver for running bare metal without an operating system.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="threadx-middleware-os">ThreadX<a aria-hidden="true" class="hash-link" href="#threadx-middleware-os" title="Direct link to heading">​</a></h4><p>ThreadX can be enabled either by selecting an AZRTOS Software Pack or by enabling the Native ThreadX Middleware from STM32CubeMX, if available for the selected MCU device.</p><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content"><li>All new STM32 MCU devices will support, by default, ThreadX Middleware directly available from STM32CubeMX without requiring additional pack downloads. TouchGFX Board Support packs will slowly transition to using either ThreadX middleware, where available, or X-CUBE-AZRTOS software packs.</li><li>X-CUBE-AZRTOS-XX Expansion Packs providing ThreadX support are already available for the <i>STM32G0xx, STM32G4xx, STM32L4xx, STM32F4xx, STM32F7xx</i> and the <i>STM32H7xx</i> MCU Series.</li></div></div><p>The following figure shows these options available through the TouchGFX Generator.</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/driver-rtos-options-threadx.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/driver-rtos-options-threadx.png"></a><p>RTOSドライバのオプション</p></div><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content"><li><b><i>NoOS</i></b> option is disabled when <b>ThreadX</b> Middleware is enabled.</li><li><b><i>CMSIS_RTOS_V1</i></b> and <b><i>CMSIS_RTOS_V2</i></b> options are disabled when <b>ThreadX</b> Middleware is enabled. CMSIS OS wrapper is not provided by ST, customer has to select <b><i>Custom</i></b> option and implement the CMSIS wrapper.</li></div></div><h5 class="anchor anchorWithStickyNavbar_31ik" id="enabling-and-configuring-threadx-from-the-middleware-list-available-in-stm32cubemx">Enabling and configuring ThreadX from the Middleware list available in STM32CubeMX<a aria-hidden="true" class="hash-link" href="#enabling-and-configuring-threadx-from-the-middleware-list-available-in-stm32cubemx" title="Direct link to heading">​</a></h5><p>A succesful memory configuration for ThreadX relies on <i>Memory Pool Allocation</i>. The recommended value is <i>Static Allocation</i>. Perform the folowing steps in the ThreadX Middleware configuration:</p><ul><li>Enable <code>THREADX</code> Middleware by selecting <code>Core</code> from the Mode list, as seen in the figure below.</li><li>Set <code>TX_TIMER_TICKS_PER_SECOND</code> to <strong>1000</strong> to get Ticks each one millisecond</li><li>Set <code>Memory Pool Allocation</code> to <strong>Use Static Allocation</strong></li></ul><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/enable-and-configure-native-threadx-mw.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/enable-and-configure-native-threadx-mw.png"></a><p>Enabling and Configuring Native ThreadX Middleware</p></div><div class="highlight highlight-caution"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></div>Caution</h5></div><div class="highlight-content"><li><b>Memory Pool Allocation</b> should be set to <b>Use Dynamic Allocation</b> when <b>Native ThreadX Middleware</b> is enabled</li><ul><li>When <b>Memory Pool Allocation</b> is set to <b>Use Dynamic Allocation</b></li><ul><li>User will have to add the missing code in the <i>USER CODE BEGIN DYNAMIC_MEM_ALLOC</i> section in the generated <b><i>app_azure_rtos.c</i></b> file.</li><li>User will need also to update the linker files following the recemmendation described in the generated <b><i>app_azure_rtos.c</i></b> file.</li></ul></ul></div></div><h5 class="anchor anchorWithStickyNavbar_31ik" id="enabling-and-configuring-threadx-from-azrtos-software-pack">Enabling and configuring ThreadX from AZRTOS Software Pack<a aria-hidden="true" class="hash-link" href="#enabling-and-configuring-threadx-from-azrtos-software-pack" title="Direct link to heading">​</a></h5><ul><li>Select <strong>Software Packs -&gt; Select Components</strong> or Press <code>Alt-O</code>.</li><li>Select <strong>STMicroelectonics.X-CUBE-AZRTOS-XX</strong>. Download the pack if required.</li><li>Select <strong>RTOS ThreadX</strong> and check the <strong>Core</strong> check box to enable ThreadX. You can now safely close the <i>Software Packs Component Selector</i>.</li></ul><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos.png"></a><p>Enabling ThreadX from an X-CUBE-AZRTOS Software Pack</p></div><ul><li>Select the <i>Software Packs</i> group from the <i>Categories</i> list on the left hand side and select <strong>STMicroelectonics.X-CUBE-AZRTOS-XX</strong></li><li>Enable ThreadX by selecting the mode <strong>RTOS ThreadX</strong></li><li>Set <code>Memory Pool Allocation</code> to <strong>Use Static Allocation</strong></li></ul><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos-config1.png" target="_blank"><img width="800" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos-config1.png"></a><p>ThreadX Configuration - X-CUBE-AZRTOS Software Pack</p></div><ul><li>Set <code>TX_TIMER_TICKS_PER_SECOND</code> to <strong>1000</strong> to get ticks once per millisecond.</li></ul><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos-config2.png" target="_blank"><img width="800" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos-config2.png"></a><p>ThreadX Configuration - X-CUBE-AZRTOS Software Pack</p></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="freertos-middleware-os">FreeRTOS<a aria-hidden="true" class="hash-link" href="#freertos-middleware-os" title="Direct link to heading">​</a></h4><p>次の関数を呼び出すと、TouchGFXのメイン･ループに入ります。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">MX_TouchGFX_Process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>開発者はTouchGFXアプリケーションを実行したいタスクのタスク･ハンドラ内で、この関数を呼び出す必要があります。 If the user configured a FeeRTOS task from STM32CubeMX called <code>DefaultTask</code> then the following example shows how <code>MX_TouchGFX_Process()</code> is called to start TouchGFX in the user code section of its task handler.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">StartDefaultTask</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">argument</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE BEGIN 5 */</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">MX_TouchGFX_Process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE END 5 */</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>STM32CubeMX will also generate a call to <code>osKernelStart();</code> which starts the scheduler.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="threadx-middleware-os">ThreadX Middleware<a aria-hidden="true" class="hash-link" href="#threadx-middleware-os" title="Direct link to heading">​</a></h4><p>STM32CubeMX is no more responsible of generating the code creating the threads for middlewares and for the user.<br> STM32CubeMX will generate the call to the <code>MX_TouchGFX_PreOSInit()</code> function which will initialize the TouchGFX framework<br> STM32CubeMX will generate the call to the <code>MX_ThreadX_Init()()</code> function which will initialize and start the ThreadX kernel</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Call PreOsInit function */</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">MX_TouchGFX_PreOSInit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE BEGIN 2 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE END 2 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">MX_ThreadX_Init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>TouchGFX Generator will generate the <code>MX_TouchGFX_PreOSInit()</code> function which will simply call the <code>touchgfx_init()</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * PreOS Initialization function</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">MX_TouchGFX_PreOSInit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Calling forward to touchgfx_init in C++ domain</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">touchgfx_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>TouchGFX Generator will generate the <code>MX_TouchGFX_Init()</code> function which will create the TouchGFX thread</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Create TouchGFX Thread</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">UINT </span><span class="token function" style="color:rgb(130, 170, 255)">MX_TouchGFX_Init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">VOID </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">memory_ptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  UINT ret </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> TX_SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  CHAR </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">pointer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Allocate the stack for TouchGFX Thread.  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">tx_byte_allocate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">TX_BYTE_POOL</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">memory_ptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">VOID </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">pointer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       TOUCHGFX_STACK_SIZE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> TX_NO_WAIT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> TX_SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ret </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> TX_POOL_ERROR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Create TouchGFX Thread */</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">tx_thread_create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">TouchGFXThread</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">CHAR </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;TouchGFX&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> TouchGFX_Task</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                       pointer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> TOUCHGFX_STACK_SIZE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                       </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                       TX_NO_TIME_SLICE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> TX_AUTO_START</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> TX_SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    ret </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> TX_THREAD_ERROR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> ret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>TouchGFX Generator will generate the required code which will be inserted by STM32CubeMX into the file <b><i>app_azure_rtos.c</i></b></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  * @brief  Define the initial system.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  * @param  first_unused_memory : Pointer to the first unused memory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  * @retval None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">VOID </span><span class="token function" style="color:rgb(130, 170, 255)">tx_application_define</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">VOID </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">first_unused_memory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">tx_byte_pool_create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">touchgfx_app_byte_pool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;TouchGFX App memory pool&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> touchgfx_byte_pool_buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> TOUCHGFX_APP_MEM_POOL_SIZE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> TX_SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE BEGIN TouchGFX_Byte_Pool_Error */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE END TouchGFX_Byte_Pool_Error */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE BEGIN TouchGFX_Byte_Pool_Success */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE END TouchGFX_Byte_Pool_Success */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    memory_ptr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">VOID </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">touchgfx_app_byte_pool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">MX_TouchGFX_Init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">memory_ptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> TX_SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE BEGIN  MX_X-CUBE-TOUCHGFX_Init_Error */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">while</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE END  MX_X-CUBE-TOUCHGFX_Init_Error */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE BEGIN  MX_X-CUBE-TOUCHGFX_Init_Success */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* USER CODE END  MX_X-CUBE-TOUCHGFX_Init_Success */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>The <code>tx_application_define()</code> function is called by the ThreadX kernel at initialization time.<br> The <code>MX_TouchGFX_Init()</code> function is called by <code>tx_application_define()</code>.<br> The TouchGFX thread will be started later when the ThreadX kernel is started.</p><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content"><li>STM32CubeMX generate full code only the <b>Static Memory Pool Allocation</b> configuration for the <b>ThreadX Middlewares</b>.</li><li>Please refer to the <i>STM32H7B3I-DK/Applications/AnimatedImages</i> example available inside the <b>X-CUBE-TOUCHGFX</b> expansion pack if you want to configure ThreadX with <b>Dynamic Memory Allocation</b></li></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="other-cmsis-compliant-os">その他のCMSIS準拠OS<a aria-hidden="true" class="hash-link" href="#other-cmsis-compliant-os" title="Direct link to heading">​</a></h4><p>When developers require a different CMSIS compliant OS than what STM32CubeMX can offer (FreeRTOS and ThreadX) he must perform RTOS configuration and task definition manually. 一般的には、以下の手動ステップを行う必要があります。</p><ol><li>RTOSを設定する。</li><li>TouchGFXを実行するためのタスクを定義する（<code>MX_TouchGFX_Process</code>）。</li><li>スケジューラを起動する。</li></ol><p><code>MX_TouchGFX_Process</code> を呼び出して、タスク･ハンドラ内で TouchGFXエンジンのメイン･ループを開始します。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">MX_TouchGFX_Process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="additional-features">Additional features<a aria-hidden="true" class="hash-link" href="#additional-features" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_31ik" id="external-data-reader">External Data Reader<a aria-hidden="true" class="hash-link" href="#external-data-reader" title="Direct link to heading">​</a></h4><p>RGB565フレームバッファ･ピクセル･フォーマットでは、touchgfxは、いわゆる<em>データ･リーダ</em>のインタフェースをサポートしています。これにより開発者は、メモリ内で追加バッファが必要となる<a href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/caching-bitmaps">キャッシュ</a>を行うのではなく、メモリマップされないシリアルFlashから直接データを読み出せます。 データ･リーダを実装して、メモリマップされないFlashチップからアプリケーション･アセットを取得する方法の例については、<a href="/4.19/ja/docs/development/scenarios/using-serial-flash">シリアルFlash</a>の記事を参照してください。</p><p>通常、<em>データ･リーダ</em>のオプションは、追加バッファ用に十分なメモリを備えていない低コストのソリューション(STM32G0など)で使用されます。 DMA2Dが有効である場合、これは有効化できません。</p><p>フレームバッファのピクセル･フォーマットとして<em>RGB565</em>を選択すると、<em>［Additional Features］</em>グループが使用可能になります。</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/additional-features-data-reader.png" target="_blank"><img width="520" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/additional-features-data-reader.png"></a><p>［Additional Features］のデータ･リーダ</p></div><p>開発者は以下の設定を行うことができます。</p><ul><li><strong>External Data Reader</strong>: この機能を有効化または無効化します。 有効化すると、TouchGFXは生成済みのインタフェースを介してアセットのデータを直接取得します。 無効化した場合は、開発者がメモリ内のバッファに画像を<em>キャッシュ</em>する必要があります。</li><li><strong>External Data Reader: Line Buffer Size</strong>: 画像またはテキストをフレームバッファにブレンドするための2つのバッファを作成します。 ARGB8888ピクセル･フォーマットでフル･サイズの画像をサポートするためのデフォルト値は、一画面の幅 x 4バイトです。</li><li><strong>External Data Reader: Minimum DMA transfer size</strong>: DMA転送を開始するための最小限必要なバイト数を設定します。 これより少ないバイト数が要求された場合、DMAは使用されません。</li></ul><p><em>［External Data Reader］</em> を有効にしてコードを生成すると、メモリマップされないFlashからアセットを直接取得できるように以下の追加ファイルが作成されます。</p><ul><li><code>TouchGFX/target/generated/TouchGFXGeneratedDataReader.cpp</code></li><li><code>TouchGFX/target/generated/TouchGFXGeneratedDataReader.hpp</code></li><li><code>TouchGFX/target/TouchGFXDataReader.cpp</code></li><li><code>TouchGFX/target/TouchGFXDataReader.hpp</code></li></ul><p>通常通り、TouchGFX Generatorによって生成されたコードに対して、<code>TouchGFXGeneratedDataReader</code> は読出し専用であり、ユーザの変更は <code>TouchGFXDataReader</code>クラス内で行う必要があります。 <code>TouchGFXGeneratedDataReader</code>のタイプは<code>touchgfx::FlashDataReader</code>.です。</p><p>以下のファイルが変更され、<code>DataReader</code>を使用するようにTouchGFX HALが設定されます。</p><ul><li><code>TouchGFX/target/generated/TouchGFXConfiguration.cpp</code></li><li><code>TouchGFX/target/generated/TouchGFXGeneratedHAL.cpp</code></li><li><code>TouchGFX/target/generated/TouchGFXGeneratedHAL.hpp</code></li></ul><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">データ･リーダの［Additional Feature］は、DMA2DとLTDCが無効になっている場合にのみ使用できます。</div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="8bit-ltdc-color-look-up-table">8bitLTDCカラー･ルックアップ･テーブル<a aria-hidden="true" class="hash-link" href="#8bit-ltdc-color-look-up-table" title="Direct link to heading">​</a></h4><p>フレームバッファをL8フォーマットで読み出すようにLTDCが設定されており、TouchGFXが <a href="/4.19/ja/docs/api/classes/classtouchgfx_1_1_l_c_d8bpp___a_b_g_r2222">ABRG2222</a>、<a href="/4.19/ja/docs/api/classes/classtouchgfx_1_1_l_c_d8bpp___a_r_g_b2222">ARGB222</a>、<a href="/4.19/ja/docs/api/classes/classtouchgfx_1_1_l_c_d8bpp___b_g_r_a2222">BGRA2222</a>、<a href="/4.19/ja/docs/api/classes/classtouchgfx_1_1_l_c_d8bpp___r_g_b_a2222">RGBA2222</a>のいずれかでレンダリングする場合、TouchGFX Generatorは、<code>TouchGFXHAL::initialize()</code>の実行時にLTDCにロードされるCLUTを提供します。 LTDCおよびCLUTの使用方法の詳細については、STM32マイクロコントローラのリファレンス･マニュアルを参照してください。</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="video-decoding">Video Decoding<a aria-hidden="true" class="hash-link" href="#video-decoding" title="Direct link to heading">​</a></h2><p>The Video Decoding section allows developers to enhance the TouchGFX HAL with either hardware or software video decoding capabilities.</p><p>Video Decoding is only available with RGB565 (16bpp) and RGB888 (24bpp) framebuffer pixel formats. If neither of these formats are selected the Video Decoding section will not be available.</p><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">Not all MCUs support hardware video decoding.</div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="video-decoding-type">Type<a aria-hidden="true" class="hash-link" href="#video-decoding-type" title="Direct link to heading">​</a></h3><p>By default the &quot;Type&quot; of video Decoding is disabled. If the required peripherals are not enabled in STM32CubeMX both &quot;Software&quot; and &quot;Hardware&quot; will be greyed out. Hover the mouse over the greyed out options the see which peripherals are required.</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/video-dependecies-info-box.png" target="_blank"><img width="800" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/video-dependecies-info-box.png"></a><p>Info box showing Video Type dependencies for &quot;Hardware&quot;</p></div><ul><li><strong>Software</strong> - If LIBJPEG is enabled under the Middleware section in STM32CubeMX the &quot;Software&quot; option can be selected and the software decoder will be generated. This means that TouchGFX Generator will generate a software MJPEG decoder.</li><li><strong>Hardware</strong> - If JPEG is enabled under the Multimedia section and a CMSIS compliant RTOS is selected in the TouchGFX Generator the &quot;Hardware&quot; option can be selected.</li></ul><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-options-4-18.png" target="_blank"><img width="800" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-options-4-18.png"></a><p>Video decoding type options</p></div><p>In the LIBJPEG settings the RGB ordering in the &quot;RGB scanline format&quot;-section has to be set to &quot;BGR&quot; instead of &quot;RGB&quot; for efficiency. The number of bytes per pixel must be set to 3.</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/libjpeg-rgb-ordering.png" target="_blank"><img width="700" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/libjpeg-rgb-ordering.png"></a><p>Required LIBJPEG RGB scanline format settings</p></div><p>When working with hardware decoding the RGB format in the JPEG settings has to be the same as the display.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content">See section <a href="/4.19/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-video-decoding">Scenarios</a> for concrete examples of code for different video decoding scenarios.</div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="video-decoding-number">Concurrent videos<a aria-hidden="true" class="hash-link" href="#video-decoding-number" title="Direct link to heading">​</a></h3><p>The &quot;Concurrent Videos&quot; option is the largest amount of videos being decoded simultainously on the same screen in the GUI at any given time. If you only wish to decode one video on a screen the &quot;Number of Videos&quot; can be set to 1.</p><p>A maximum of 4 videos can be decoded simultaneously.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="video-decoding-strategy">Strategy<a aria-hidden="true" class="hash-link" href="#video-decoding-strategy" title="Direct link to heading">​</a></h3><p>The developer has three options when it comes to the video decoding strategy.</p><ul><li><strong>Direct to Framebuffer</strong> - The video is decoded in the UI thread. It is slower than the other strategies. When working with hardware video decoding the &quot;Direct to Framebuffer&quot; option is unavailable.</li><li><strong>Single Buffer</strong> - Video is decoded in a seperate task in a dedicated buffer. This buffer is allocated in internal memory.</li><li><strong>Double Buffer</strong> - Video is decoded in a seperate task in two dedicated buffers for better performances at the cost of memory.</li></ul><p>When working with the single or double framebuffer strategy it is necessary to enable a CMSIS compliant OS.</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/video-rtos-requirement-info-box.png" target="_blank"><img width="750" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/video-rtos-requirement-info-box.png"></a><p>Info box about CMSIS RTOS requirement</p></div><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">Pay attention to the memory consumption when working with the double buffer strategy.</div></div><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content">See section <a href="/4.19/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-video-decoding">Scenarios</a> for a concrete example of configuring FreeRTOS for video decoding.</div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="decode-format">Decode Format<a aria-hidden="true" class="hash-link" href="#decode-format" title="Direct link to heading">​</a></h3><p>For Software decoding, developers can choose the pixel format of the RGB buffer regardless of the pixel format of the framebuffer. TouchGFX Generator generates code that allows ChromART to do pixel-format-conversion between the formats if they&#x27;re different. Having the video decoding buffer in RGB565 allows developers to have a smaller memory footprint.</p><div class="figure noshadow"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-decode-format.png" target="_blank"><img width="700" src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-decode-format.png"></a><p>Decode format</p></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="video-decoding-buffer-size">Buffer size<a aria-hidden="true" class="hash-link" href="#video-decoding-buffer-size" title="Direct link to heading">​</a></h3><p>The buffer width and height settings must correspond to the largest video dimension in the application. The width must be divisible by 32.</p><p>The following code is the generated code in <code>TouchGFXGeneratedHAL.cpp</code> for an application using an RGB888 display with a 480*272 video and the &quot;Single Buffer&quot; video decoding strategy.</p><div class="code-header"><div><h5>TouchGFXGeneratedHAL.cpp</h5></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;DedicatedBufferVideoController.hpp&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;SoftwareMJPEGDecoder.hpp&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">uint32_t</span><span class="token plain"> lineBuffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">480</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SoftwareMJPEGDecoder </span><span class="token function" style="color:rgb(130, 170, 255)">mjpegdecoder1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">lineBuffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">uint32_t</span><span class="token plain"> videoRGBBuffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">97920</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DedicatedBufferController</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">480</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">272</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">480</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token number" style="color:rgb(247, 140, 108)">3U</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Bitmap</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">RGB888</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> videoController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//Singleton Factory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">VideoController</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">VideoController</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> videoController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TouchGFXGeneratedHAL</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">initialize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">initialize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">registerEventListener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Application</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">setFrameBufferStartAddresses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">frameBuf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">frameBuf </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">frameBuf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint32_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     * Add software decoder to video controller</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    videoController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">addDecoder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mjpegdecoder1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    videoController</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setRGBBuffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint8_t</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">videoRGBBuffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">videoRGBBuffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="generated-project">生成されるプロジェクト<a aria-hidden="true" class="hash-link" href="#generated-project" title="Direct link to heading">​</a></h2><p>TouchGFX works with (at least) the following IDEs when generating code using the <strong>Generate Code</strong> button in STM32CubeMX:</p><ol><li>EWARM</li><li>MDK-ARM</li><li>STM32CubeIDE</li></ol><p>最適なプロジェクト構造を得るために、プロジェクト生成では以下のオプションを選択します。</p><ul><li>［Application structure］:<strong>［Advanced］</strong></li><li><strong>［Generate under root］</strong>無効化(STM32CubeIDEのみ)</li></ul><div class="figure"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/project-manager.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/project-manager.png"></a><p>［Advanced］のアプリケーション構造を選択し、［Generate under root］をオフにする</p></div><p>STM32CubeMX will also generate a <em>TouchGFX</em> folder with the following structure:</p><div class="figure"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/folder-b.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/folder-b.png"></a><p>TouchGFXフォルダの構造</p></div><ul><li><em>App</em> フォルダには、TouchGFXを初期化し、起動するコードが含まれています。</li><li><em>target</em>フォルダには、読出し専用の生成済みコード（generated/内）と、変更可能なユーザ･クラス(<code>STM32TouchController.cpp</code>、<code>TouchGFXGPIO.cpp</code> および<code>TouchGFXHAL.cpp</code>が含まれています。</li><li><em>.part</em>ファイルは、TouchGFXヘッダ･ファイルとライブラリを完備した完全なTouchGFXプロジェクトを作成するために、TouchGFX Designerを使用して開かれます。partファイルにはピクセル･フォーマットやDesignerがTouchGFXアプリケーション･コードを生成するときに使用するキャンバスの寸法などの関連するアプリケーション情報が含まれています。</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="touchgfx-designer-project">TouchGFX Designerプロジェクト<a aria-hidden="true" class="hash-link" href="#touchgfx-designer-project" title="Direct link to heading">​</a></h2><p>The following json structure is an example of the contents of the <code>.part</code> file mentioned in the <a href="#generated-code-architecture">Generated Code Architecture</a> section for a project based on STM32U599. The post-generate command in the example below will update the project selected by the user in STM32CubeMX Project Manager tab (e.g. EWARM) with required libraries for TouchGFX and optional components as well as new files created by TouchGFX designer (e.g. new screens and assets).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Application&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;STM32U599J-DK&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;TouchGfxPath&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;../Middlewares/ST/touchgfx&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;AvailableColorDepths&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">24</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;AvailableLCDs&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;24&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;LCDGPU2D&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;AvailableResolutions&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;Width&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">480</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;Height&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">480</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;PostGenerateTargetCommand&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;touchgfx update_project&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Family&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;STM32U5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;SubFamily&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;STM32U599/5A9&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Platform&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;m33&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;ProjectFile&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;../STM32U599J-DK.ioc&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;OptionalComponentsRoot&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;../Middlewares/ST/touchgfx_components&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;OptionalComponents&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GPU2D&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Version&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;4.19.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>TouchGFX Designerで<em>.part</em> ファイルを開くと、開発者には、具体的なUIをロードするのか、空のテンプレートから開始するのかを選択するオプションが表示されます。</p><div class="figure"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/choose-ui-4-17.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/choose-ui-4-17.png"></a><p>UIの選択</p></div><p>TouchGFX Designerで<em>［Generate Code］</em>を押すと、TouchGFXフォルダの構造は以下のようになります。 下の画像はTouchGFXフォルダ構造の具体例を示しており、生成後の新しいファイルやフォルダをハイライト表示しています。</p><div class="figure"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/designer-gen-code-4-17.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/designer-gen-code-4-17.png"></a><p>［Generate Code］</p></div><div class="figure"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/post-designer-generation.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/post-designer-generation.png"></a><p>TouchGFXフォルダの構造</p></div><p>TouchGFX will detect the selected IDE from the .ioc STM32CubeMX file (For STM32CubeIDE, EWARM, MDK-ARM) and update the project file with new, generated files like files for screen definitions, image- and font assets.</p><p>At this point, developers can work interchangeably in STM32CubeMX, TouchGFX Designer and toolchain/IDE where:</p><ul><li>STM32CubeMX updates the IDE project with drivers</li><li>STM32CubeMX updates the TouchGFX <em>.part</em> file with UI related changes that are instantly picked up by the designer</li><li>STM32CubeMX generates HAL code (TouchGFX/target/generated/) based on TouchGFX Generator Configuration necessary for TouchGFX to work on a specific platform.</li><li>TouchGFX Designerは生成されたコードでプロジェクトを更新する。</li></ul><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">For Dual-Core projects, having enabled TouchGFX for a specific context, the TouchGFX project will usually be located in a dedicated folder for that context, e.g. &quot;CM4/TouchGFX&quot; or &quot;CM7/TouchGFX&quot;.</div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="modifying-generated-behavior">生成された動作の変更<a aria-hidden="true" class="hash-link" href="#modifying-generated-behavior" title="Direct link to heading">​</a></h2><p>It important to know that, due to the class hierarchy of the HAL, users can override HAL configuration or behavior that was generated by STM32CubeMX. 以下の例では、開発者が <code>initialize</code> 関数を変更することで、TouchGFXの追加設定や、<code>TouchGFXGeneratedHAL</code> の既存の設定の変更が可能です。</p><div class="code-header"><div><h5>TouchGFXHAL.cpp</h5></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TouchGFXHAL</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">initialize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Calling parent implementation of initialize().</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// To overwrite the generated implementation, omit call to parent function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// and implemented needed functionality here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Please note, HAL::initialize() must be called to initialize the framework.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">TouchGFXGeneratedHAL</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">initialize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//Overriding configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    hal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">lockDMAToFrontPorch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    hal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setFingerSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    hal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="upgrading-projects">プロジェクトのアップグレード<a aria-hidden="true" class="hash-link" href="#upgrading-projects" title="Direct link to heading">​</a></h2><p>TouchGFX Generator parameters are stored in .ioc files (STM32CubeMX project). TouchGFX Generatorの新バージョンがリリースされると、旧バージョンのパラメータが新バージョンと互換性を持たないために移行が必要になる可能性があります。</p><p>Since STM32CubeMX does not support upgrading between X-CUBE versions the upgrade is automatically performed by TouchGFX Designer when <em>Generate Code</em> is pressed due to the following command in the <code>PostGenerateTargetCommand</code> section of the <code>.touchgfx</code> file.</p><div class="code-header"><div><h5>.touchgfx</h5></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;PostGenerateTargetCommand&quot; : &quot;touchgfx update_project --project-file=../upgrade.ioc --platform=m7&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>コマンドによって<code>.ioc</code> ファイルが読み出され、現在のバージョンのX-CUBE-TOUCHGFXに合うようにパラメータが更新されます。 次の例は、X-CUBE-TOUCHGFX 4.13.0で作成された.iocファイルで、スクリプト（X-CUBE-TOUCHGFX 4.14.0）を手動で実行する方法を示しています。</p><div class="code-header"><div><h5>STM32F746 DISCOアプリケーション･テンプレートを使用した4.13.0から4.14.0へのアップグレード例</h5></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ touchgfx update_project --project-file=../STM32F746G_DISCO.ioc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  TouchGFX Generator 4.13.0 found</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Creating backup of ../STM32F746G_DISCO.ioc as ../backup_STM32F746G_DISCO.ioc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Performing upgrade 4.13.0 -&gt; 4.14.0 ... OK</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">コピー</button></div></div><p>Opening the updated project with STM32CubeMX prompts the user to install the version of X-CUBE-TOUCHGFX that is represented by the .ioc file (if not already installed). <em>［Download now］</em>をクリックすると、X-Cube-TouchGFX-4.14.0のダウンロードとインストールが行われます。</p><div class="figure"><a href="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/cubemx-additional-software-manager-settings-missing-x-cube-touchgfx-4.14.0.png" target="_blank"><img src="/4.19/ja/img/development/touchgfx-hal-development/touchgfx-generator/cubemx-additional-software-manager-settings-missing-x-cube-touchgfx-4.14.0.png"></a><p>追加ソフトウェア･コンポーネントが見つからない場合:</p></div><p>アップグレード･プロセスの実行時、TouchGFX Generatorの設定はすべて保持され、.iocファイルのバックアップは先頭に<code>backup_</code>が付いた状態で、元のファイルと同じ場所に配置されます</p><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">To use the new features provided by TouchGFX Generator, <i>Generate Code</i> must be performed in STM32CubeMX.</div></div><div class="highlight highlight-caution"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></div>Caution</h5></div><div class="highlight-content">If upgrading X-CUBE-TOUCHGFX through STM32CubeMX for an existing TouchGFX Project and the upgrade process is not run by TouchGFX Designer, TouchGFX Generator parameters will be reset to default since they are applicable to a different version.</div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-architecture"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">« <!-- -->抽象化レイヤ･アーキテクチャ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/4.19/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">LTDC / パラレルRGB<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#enabling-touchgfx-generator" class="table-of-contents__link toc-highlight">TouchGFX Generatorの有効化</a></li><li><a href="#generated-code-architecture" class="table-of-contents__link toc-highlight">生成されるコードのアーキテクチャ</a></li><li><a href="#feature-overview" class="table-of-contents__link toc-highlight">機能の概要</a></li><li><a href="#display" class="table-of-contents__link toc-highlight">Display</a><ul><li><a href="#interface-and-dimensions" class="table-of-contents__link toc-highlight">インタフェースと寸法</a></li><li><a href="#framebuffer-pixel-format" class="table-of-contents__link toc-highlight">Framebuffer Pixel Format</a></li><li><a href="#buffering-strategies" class="table-of-contents__link toc-highlight">Buffering Strategies</a></li></ul></li><li><a href="#driver" class="table-of-contents__link toc-highlight">Driver</a><ul><li><a href="#application-tick-source" class="table-of-contents__link toc-highlight">Application Tick Source</a></li><li><a href="#graphics-accelerator" class="table-of-contents__link toc-highlight">Graphics Accelerator</a></li><li><a href="#real-time-operating-system" class="table-of-contents__link toc-highlight">Real-Time Operating System</a></li><li><a href="#additional-features" class="table-of-contents__link toc-highlight">Additional features</a></li></ul></li><li><a href="#video-decoding" class="table-of-contents__link toc-highlight">Video Decoding</a><ul><li><a href="#video-decoding-type" class="table-of-contents__link toc-highlight">Type</a></li><li><a href="#video-decoding-number" class="table-of-contents__link toc-highlight">Concurrent videos</a></li><li><a href="#video-decoding-strategy" class="table-of-contents__link toc-highlight">Strategy</a></li><li><a href="#decode-format" class="table-of-contents__link toc-highlight">Decode Format</a></li><li><a href="#video-decoding-buffer-size" class="table-of-contents__link toc-highlight">Buffer size</a></li></ul></li><li><a href="#generated-project" class="table-of-contents__link toc-highlight">生成されるプロジェクト</a></li><li><a href="#touchgfx-designer-project" class="table-of-contents__link toc-highlight">TouchGFX Designerプロジェクト</a></li><li><a href="#modifying-generated-behavior" class="table-of-contents__link toc-highlight">生成された動作の変更</a></li><li><a href="#upgrading-projects" class="table-of-contents__link toc-highlight">プロジェクトのアップグレード</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2021 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div>
<script src="/4.19/ja/assets/js/runtime~main.e56c57b7.js"></script>
<script src="/4.19/ja/assets/js/main.be677927.js"></script>
</body>
</html>