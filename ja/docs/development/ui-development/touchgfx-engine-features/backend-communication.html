<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/ui-development/touchgfx-engine-features/backend-communication">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.19/ja/opensearch.xml">
<script src="/4.19/js/fix-location.js"></script><title data-rh="true">バックエンド通信 | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.19/ja/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.19/ja/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.19/ja/docs/development/ui-development/touchgfx-engine-features/backend-communication"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="バックエンド通信 | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.19/ja/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.19/ja/docs/development/ui-development/touchgfx-engine-features/backend-communication"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.19/docs/development/ui-development/touchgfx-engine-features/backend-communication" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.19/ko/docs/development/ui-development/touchgfx-engine-features/backend-communication" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.19/ja/docs/development/ui-development/touchgfx-engine-features/backend-communication" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.19/zh-CN/docs/development/ui-development/touchgfx-engine-features/backend-communication" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.19/zh-TW/docs/development/ui-development/touchgfx-engine-features/backend-communication" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.19/docs/development/ui-development/touchgfx-engine-features/backend-communication" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.19/ja/assets/css/styles.a19cb1ba.css">
<link rel="preload" href="/4.19/ja/assets/js/runtime~main.3103d185.js" as="script">
<link rel="preload" href="/4.19/ja/assets/js/main.e0644e5e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.19/ja/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.19/ja/img/logo.svg" alt="TouchGFX" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/4.19/ja/img/logo.svg" alt="TouchGFX" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><span>日本語</span></span></a><ul class="dropdown__menu"><li><a href="/4.19/docs/development/ui-development/touchgfx-engine-features/backend-communication" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/4.19/ko/docs/development/ui-development/touchgfx-engine-features/backend-communication" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/backend-communication" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">日本語</a></li><li><a href="/4.19/zh-CN/docs/development/ui-development/touchgfx-engine-features/backend-communication" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.19/zh-TW/docs/development/ui-development/touchgfx-engine-features/backend-communication" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.19/ja/docs/introduction/welcome">4.19</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/backend-communication">4.19</a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_Gz_y"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.19/ja/docs/category/introduction">概要</a><button aria-label="Toggle the collapsible sidebar category &#x27;概要&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.19/ja/docs/category/basic-concepts">Basic Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basic Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.19/ja/docs/development/development-introduction">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/development/hardware-selection/hardware-selection-introduction">ハードウェアの選択</a><button aria-label="Toggle the collapsible sidebar category &#x27;ハードウェアの選択&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/development/board-bring-up/board-introduction">ボード立ち上げ</a><button aria-label="Toggle the collapsible sidebar category &#x27;ボード立ち上げ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL（抽象化レイヤ）開発</a><button aria-label="Toggle the collapsible sidebar category &#x27;TouchGFX AL（抽象化レイヤ）開発&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.19/ja/docs/development/ui-development/ui-development-introduction">UI開発</a><button aria-label="Toggle the collapsible sidebar category &#x27;UI開発&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/category/software-architecture">Software Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Software Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/category/working-with-touchgfx">Working with TouchGFX</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with TouchGFX&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/category/designer-user-guide">Designer User Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Designer User Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.19/ja/docs/category/touchgfx-engine-features">TouchGFX Engine Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;TouchGFX Engine Features&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/custom-triggers-and-actions">カスタム･トリガとカスタム･アクション</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/position-size">Position and size</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/custom-containers">カスタム･コンテナ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/caching-bitmaps">ビットマップのキャッシュ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/custom-widgets">カスタム･ウィジェット</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/canvas-widgets">Canvas Widget（キャンバス･ウィジェット）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/dynamic-bitmaps">ダイナミック･ビットマップ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/using-binary-fonts">バイナリ･フォント</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/font-cache">フォント･キャッシュ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/using-binary-translations">バイナリ翻訳</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/backend-communication">バックエンド通信</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/mixins">ミックスイン</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/texts-and-fonts">テキストとフォント</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/languages-and-characters">言語と文字</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/video">MJPEG Video</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/category/ui-components">UI Components</a><button aria-label="Toggle the collapsible sidebar category &#x27;UI Components&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/category/scenarios-1">Scenarios</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scenarios&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.19/ja/docs/category/scenarios-2">Scenarios</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scenarios&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.19/ja/docs/category/miscellaneous-1">Miscellaneous</a><button aria-label="Toggle the collapsible sidebar category &#x27;Miscellaneous&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.19/ja/docs/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.19/ja/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.19/ja/docs/category/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.19/ja/docs/development/development-introduction"><span itemprop="name">Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.19/ja/docs/development/ui-development/ui-development-introduction"><span itemprop="name">UI開発</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.19/ja/docs/category/touchgfx-engine-features"><span itemprop="name">TouchGFX Engine Features</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">バックエンド通信</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>バックエンド通信</h1></header><p>ほとんどのアプリケーションでは、UIを何らかの方法でシステムのその他のコンポーネントに接続し、データを送受信する必要があります。 このために、ハードウェア･ペリフェラル（センサ･データ、A/D変換、シリアル通信など）とのインタフェースや、他のソフトウェア･モジュールとのインタフェースを行うことが考えられます。</p><p>この記事では、この接続を実装するために推奨されるソリューションについて説明します。</p><p>最初の方法は<a href="#sampling-from-gui-task">クイック･アンド･ダーティ</a>なアプローチで、主にプロトタイプを目的とするものです。一方で、<a href="#sampling-from-secondary-task">2番目の方法</a>は、現実世界のアプリケーションでUIをその他のコンポーネントと正しく接続するための堅実なアーキテクチャーに基づくものです。</p><p>この記事の最後には、両方の方法を紹介するサンプルへのリンクがあります。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="the-model-class">モデル･クラス<a class="hash-link" href="#the-model-class" title="Direct link to heading">​</a></h2><p>すべてのTouchGFXアプリケーションにはモデル･クラスがあります。これは、UIの状態情報を保存するのとは別に、周辺システムへのインタフェースとして機能する目的も持っています。 モデル･クラスによって、両方のハードウェア･ペリフェラルを参照するだけでなく、システム内の他のOSタスクとも通信します。 通常、他のソフトウェア･モジュールやハードウェアに、個別のビュー･クラスでアクセスするのは良い設計ではありません。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content">モデルの詳細については、「<a href="/4.19/ja/docs/development/ui-development/software-architecture/model-view-presenter-design-pattern">MVPのパターン」を参照してください。</a></div></div><p>以下の理由から、モデル･クラスはこうしたインタフェース･コードの配置によく適しています。</p><ol><li>The Model class has a <code>tick()</code> function which is automatically called every frame and can be implemented to look for and react to events from other sub-modules.</li><li>モデル･クラスには現在アクティブなプレゼンタへのポインタがあります。これにより、受信するイベントをUIに通知することができます。</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="system-interfacing">システムとのインタフェース<a class="hash-link" href="#system-interfacing" title="Direct link to heading">​</a></h2><p>周辺システムとのインタフェースには2つの方法があります。GUIタスクから直接サンプリングする方法と、セカンダリ･タスクからサンプリングする方法です。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="sampling-from-gui-task">GUIタスクからのサンプリング<a class="hash-link" href="#sampling-from-gui-task" title="Direct link to heading">​</a></h3><p>周辺システムとのインタフェースのために最適な方法は、サンプリングが必要とされる頻度、それにかかる時間の長さ、かかる時間がどれほど重要かによって決まります。</p><p>If your requirements in those regards are lenient, the simplest approach is to just sample the surrounding system directly in the <code>Model::tick</code> function.</p><p>サンプリングの実行頻度がフレーム･レート（通常は60Hz前後）よりも低い場合は、単純にカウンタを追加し、N番目のティックごとにサンプリングを実行します。 この方法で実行する場合、サンプリング操作をある程度高速（通常は1ms以下）で行う必要があり、そうでないとフレーム･レートに支障が出始めます。このサンプリングはGUIタスクのコンテキストで実行され、フレームの描画を遅延させるからです。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="sampling-from-secondary-task">セカンダリ･タスクからのサンプリング<a class="hash-link" href="#sampling-from-secondary-task" title="Direct link to heading">​</a></h3><p>あるいは、GUIタスクのコンテキスト内で周辺システムと直接インタラクションを実行するのが望ましくない場合、サンプリングを実行する新しいOSタスクを作成することができます。</p><p>このタスクは、特定のシナリオで必要とされる正確な時間間隔で実行するように設定できます。 また、ユーザのニーズに応じて、この新しいタスクの優先順位をGUIタスクよりも低く、または高く設定することもできます。</p><p>優先順位を高くすると、実行中のGUIタスクの内容に関わらず、指定した正確な時間にこちらのタスクが実行されることが保証されます。 ただし欠点として、それがCPUの負荷が高いプロセスである場合、UIのフレーム･レートに影響する恐れがあります。</p><p>一方、サンプリングが時間的に重要でない場合は、GUIタスクより低い優先度を割り当て、UIフレームレートが周囲のシステムのサンプリングに影響されないようにできます。 描画中は、GUIタスクのスリープ時間が長く（DMAベースのピクセル転送の完了を待つ場合など）、優先度の低いタスクでもかなりの頻度で実行可能になるため、大半のアプリケーションにとってはこれで十分です。</p><p>セカンダリ･タスクのアプローチを使用する場合には、RTOSでサポートされるタスク間メッセージング･システムを利用することをお勧めします。 すべてではありませんが、ほとんどのRTOSはキュー / メール･メカニズムを備えているので、タスク間でデータ（通常はユーザ定義のC構造体、バイト配列、または単純な整数）の送信が可能です。 新しいデータをGUIタスクに伝送するには、UIタスク用のメールボックスまたはメッセージ･キューをセットアップし、このメッセージング･システムを使用してデータをGUIタスクに送信します。 You can then <code>Model::tick</code> poll the mailbox of the GUI task to check if any new data has arrived. その場合、データを読み取り、それに応じてUIを更新します。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="propagating-data-to-ui">UIへのデータの伝播<a class="hash-link" href="#propagating-data-to-ui" title="Direct link to heading">​</a></h2><p>Regardless of whether you use <a href="#sampling-from-gui-task">Sampling from GUI Task</a> or <a href="#sampling-from-secondary-task">Sampling from Secondary Task</a>, the <code>Model::tick</code> function is the place where the GUI Task becomes aware of the new data to be shown in the UI. 周辺システムへのインタフェースとして機能するのとは別に、モデル･クラスには状態データを保存する役目もあることを思い出してください。つまり、いくつか状態変数を更新する必要もあるかもしれないということです。</p><p>温度センサがシステムに接続されているシンプルな例を考えてみましょう。ここでは現在の温度がUIに表示されます。 準備として、以下をサポートするようにモデル･クラスを拡張します。</p><div class="code-header"><div><h5>Model.hpp</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Function that allow your Presenters to read current temperature.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getCurrentTemperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> currentTemperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Called automatically by framework every tick.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">private</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Variable storing last received temperature;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> currentTemperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>With the above, your <code>Presenters</code> are able to ask the model about the current temperature, allowing a Presenter to set this value in the UI (the View) when entering a screen that displays the temperature. 次に必要なのは、新しい温度情報を受信したときに再びUIを更新できるようにすることです。 このためには、モデルが現在アクティブなプレゼンタへのポインタを持っていることを利用します。 The type of this pointer is an interface (<code>ModelListener</code>) which you can modify to reflect the application-specific events that are appropriate:</p><div class="code-header"><div><h5>ModelListener.hpp</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ModelListener</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Call this function to notify that temperature has changed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Per default, use an empty implementation so that only those</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Presenters interested in this specific event need to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// override this function.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">virtual</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">notifyTemperatureChanged</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> newTemperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Now that we have this interface hooked up, the remaining this is to do the actual sampling of incoming &quot;<i>new temperature</i>&quot; events <code>Model::tick</code></p><div class="code-header"><div><h5>Model.cpp</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Model</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">tick</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Pseudo-code for sampling data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">OS_Poll</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">GuiTaskMBox</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Here we assume that you have defined a &quot;Message&quot; struct containing type and data,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// along with some event definitions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Message</span><span class="token plain"> msg </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">OS_Read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">GuiTaskMBox</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">eventType </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> EVT_TEMP_CHANGED</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// We received information that temperature has changed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// First, update Model state variable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       currentTemperature </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> msg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Second, notify the currently active Presenter that temperature has changed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The modelListener pointer points to the currently active Presenter.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">modelListener </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        modelListener</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">notifyTemperatureChanged</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">currentTemperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>上記のアプローチでは次の2つが確実になります。</p><ol><li>The <code>currentTemperature</code> variable is always up-to-date so that your Presenter can at any time obtain the current temperature.</li><li>The <code>Presenter</code> is immediately notified of temperature changes and can take appropriate action.</li></ol><p>MVPパターンの1つの利点は、現在のスクリーンに応じて通知を個別に処理できることです。 Assume for instance that a temperature changed event occurs while displaying some kind of settings menu <i>(e.g. MainMenuPresenter/MainMenuView is active)</i> where the current temperature is of no relevance.</p><p>Since the <code>notifyTemperatureChanged</code> function has a default empty implementation, this notification is simply disregarded by the <code>MainMenuPresenter</code>. On the other hand, if you have a <code>TemperatureControlPresenter</code> you can in this Presenter override the <code>notifyTemperatureChanged</code> function and inform the View that it should display an updated temperature:</p><div class="code-header"><div><h5>TemperatureControlPresenter.hpp</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TemperatureControlPresenter</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause keyword" style="font-style:italic">public</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">ModelListener</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// override the empty function.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">virtual</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">notifyTemperatureChanged</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> newTemperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setTemp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">newTemperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The View class <code>TemperatureControlView</code>, must of course implement the <code>setTemp</code> method.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="transmitting-data-from-ui-to-surrounding-system">UIから周辺システムへのデータの伝送<a class="hash-link" href="#transmitting-data-from-ui-to-surrounding-system" title="Direct link to heading">​</a></h2><p>UIから周辺システムへのデータ / イベントの反対方向の伝送も、モデルを通してほぼ同じ方法で実行されます。 新しいターゲット温度を設定する機能を追加する必要が生じた場合、これまでの例を続行すると、モデルに以下を追加することになります。</p><div class="code-header"><div><h5>Model.hpp</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">setNewTargetTemperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> newTargetTemp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Pseudo-code for sending an event to a task responsible for controlling temperature.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Message</span><span class="token plain"> msg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  msg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">eventType </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> EVT_SET_TARGET_TEMP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  msg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> newTargetTemp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">OS_Send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SystemTaskMBox</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">msg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>In case the user sets a new target temperature in the UI, the View can inform the Presenter which holds a pointer to the Model object and is therefore able to call the <code>setNewTargetTemperature</code> function.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="examples">例<a class="hash-link" href="#examples" title="Direct link to heading">​</a></h2><p>The following examples are Board Specific Demos (BSD), however much of the code demonstrated can be reused for other demo boards and custom hardware. For these examples we create the Tasks and Queues in STM32CubeMX. We then populate the generated Tasks and implements example user code in <code>main_user.c</code>. The examples use STM32CubeMX BSP librarie to control the LEDs, user buttons and other peripherals on the STM32 evaliation kits.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="from-gui-task">GUIタスクから<a class="hash-link" href="#from-gui-task" title="Direct link to heading">​</a></h3><p>An example application, a BSD, can be found in the latest version of TouchGFX Designer under Demos -&gt; Board Specific Demo -&gt; STM32F46G Discovery kit Control LED from GUI.</p><p>The application demonstrates how to sample a button and control a LED. モデル･クラスはボタンをサンプリングし、アプリケーションの状態と一致するようにLEDを更新します。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="from-other-task">他のタスクから<a class="hash-link" href="#from-other-task" title="Direct link to heading">​</a></h3><p>An example application, a BSD, can be found in the latest version of TouchGFX Designer under Demos -&gt; Board Specific Demo -&gt; STM32H7B3I Evaluation Board Analog Sampler Task.</p><p>The application demonstrates how to sample an analog input in separate thread. この例では、MVPアーキテクチャを使用してアナログ値をビューに転送しています。</p><p>An example application, a BSD, can be found in the latest version of TouchGFX Designer under Demos -&gt; Board Specific Demo -&gt; STM32F46G Discovery kit Intertask Communication.</p><p>The application demonstrates intertask communication and propagation to and from the UI. 独自のセットアップの際に、ヒントとして使用できます。 この例では、Cコードで実装されたバックエンド･システムとC++のTouchGFX GUIの間で通信が行われています。 この例はSTM32F746G-DISCOボードで、FreeRTOS上で実行されています。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="from-multiple-tasks">複数タスクから<a class="hash-link" href="#from-multiple-tasks" title="Direct link to heading">​</a></h3><p>An example application, a BSD, can be found in the latest version of TouchGFX Designer under Demos -&gt; Board Specific Demo -&gt; STM32F769I Discovery Multitast Communication Demo.</p><p>The application samples the state of the button, passes a message through the GUI message queue if the button is pressed down. これにより、ボタンを押したままアプリケーション内のアニメーションを進めることができます。</p><p>このアプリケーションでは3つのFreeRTOSタスクを使用しています。 1つはGUI用、残り2つは各ペリフェラル（LEDとUSER Button）用です。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="from-task-and-external-interrupt-line">タスクおよび外部の割込みラインから<a class="hash-link" href="#from-task-and-external-interrupt-line" title="Direct link to heading">​</a></h3><p>An example application, a BSD, can be found in the latest version of TouchGFX Designer under Demos -&gt; Board Specific Demo -&gt; STM32F769I Discovery External Interrup Line Demo.</p><p>The application was designed for the STM32F769I-DISCO board and interacts with an LED and the USER BUTTON to show how to integrate both C code and hardware peripherals into your TouchGFX application.</p><p>このアプリケーションでは、EXTIモードでボタンを設定します（外部割込みライン0）。 ボタンが押下されると割込みを受信し、その後割込みが消去されるという動作になっています。 GPIOと同じ動作はできず、代わりに1ステップずつアニメーションを進めることになります。割込みを受信するたびに、GUIメッセージ･キューを通してメッセージが送信されるのみだからです。</p><p>このアプリケーションでは2つのFreeRTOSタスクを使用しています。 1つはGUI用、もう1つはLED用です。 （このアプリケーションでは<a href="#from-multiple-tasks">複数タスクのデモ</a>のボタン･タスクがアクティブなままになっており、ペリフェラル･インタラクションのコードが割込みハンドラに移動した例を示しています。）</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/using-binary-translations"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">バイナリ翻訳</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/4.19/ja/docs/development/ui-development/touchgfx-engine-features/mixins"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">ミックスイン</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-model-class" class="table-of-contents__link toc-highlight">モデル･クラス</a></li><li><a href="#system-interfacing" class="table-of-contents__link toc-highlight">システムとのインタフェース</a><ul><li><a href="#sampling-from-gui-task" class="table-of-contents__link toc-highlight">GUIタスクからのサンプリング</a></li><li><a href="#sampling-from-secondary-task" class="table-of-contents__link toc-highlight">セカンダリ･タスクからのサンプリング</a></li></ul></li><li><a href="#propagating-data-to-ui" class="table-of-contents__link toc-highlight">UIへのデータの伝播</a></li><li><a href="#transmitting-data-from-ui-to-surrounding-system" class="table-of-contents__link toc-highlight">UIから周辺システムへのデータの伝送</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">例</a><ul><li><a href="#from-gui-task" class="table-of-contents__link toc-highlight">GUIタスクから</a></li><li><a href="#from-other-task" class="table-of-contents__link toc-highlight">他のタスクから</a></li><li><a href="#from-multiple-tasks" class="table-of-contents__link toc-highlight">複数タスクから</a></li><li><a href="#from-task-and-external-interrupt-line" class="table-of-contents__link toc-highlight">タスクおよび外部の割込みラインから</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div>
<script src="/4.19/ja/assets/js/runtime~main.3103d185.js"></script>
<script src="/4.19/ja/assets/js/main.e0644e5e.js"></script>
</body>
</html>