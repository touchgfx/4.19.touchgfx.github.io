<!doctype html>
<html class="docs-version-current" lang="zh-TW" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.19/zh-TW/opensearch.xml">
<script src="/4.19/js/fix-location.js"></script><title data-react-helmet="true">模擬器 | TouchGFX Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://support.touchgfx.com/4.19/zh-TW/img/meta-image.png"><meta data-react-helmet="true" name="twitter:image" content="https://support.touchgfx.com/4.19/zh-TW/img/meta-image.png"><meta data-react-helmet="true" property="og:url" content="https://support.touchgfx.com/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/simulator"><meta data-react-helmet="true" name="docsearch:language" content="zh-TW"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="模擬器 | TouchGFX Documentation"><meta data-react-helmet="true" name="description" content="構建TouchGFX UI通常涉及大量的圖形細節，以匹配UI的規範。"><meta data-react-helmet="true" property="og:description" content="構建TouchGFX UI通常涉及大量的圖形細節，以匹配UI的規範。"><link data-react-helmet="true" rel="shortcut icon" href="/4.19/zh-TW/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://support.touchgfx.com/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/simulator"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/docs/development/ui-development/working-with-touchgfx/simulator" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/ko/docs/development/ui-development/working-with-touchgfx/simulator" hreflang="ko"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/ja/docs/development/ui-development/working-with-touchgfx/simulator" hreflang="ja"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/zh-CN/docs/development/ui-development/working-with-touchgfx/simulator" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/simulator" hreflang="zh-TW"><link data-react-helmet="true" rel="alternate" href="https://support.touchgfx.com/4.19/docs/development/ui-development/working-with-touchgfx/simulator" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.19/zh-TW/assets/css/styles.321a00f7.css">
<link rel="preload" href="/4.19/zh-TW/assets/js/runtime~main.7d7308f7.js" as="script">
<link rel="preload" href="/4.19/zh-TW/assets/js/main.01805fa2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.19/zh-TW/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.19/zh-TW/img/logo.svg" alt="TouchGFX" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/4.19/zh-TW/img/logo.svg" alt="TouchGFX" class="themedImage_1VuW themedImage--dark_hz6m"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link"><span><span>繁體中文</span></span></a><ul class="dropdown__menu"><li><a href="/4.19/docs/development/ui-development/working-with-touchgfx/simulator" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/4.19/ko/docs/development/ui-development/working-with-touchgfx/simulator" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">한국어</a></li><li><a href="/4.19/ja/docs/development/ui-development/working-with-touchgfx/simulator" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">日本語</a></li><li><a href="/4.19/zh-CN/docs/development/ui-development/working-with-touchgfx/simulator" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">简体中文</a></li><li><a href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/simulator" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/4.19/zh-TW/docs/introduction/welcome">4.19</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/simulator">4.19</a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_1ZXk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Basic Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/zh-TW/docs/development/development-introduction">開發簡介</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Hardware Selection</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Board Bring Up</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">TouchGFX AL Development</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">UI Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/zh-TW/docs/development/ui-development/ui-development-introduction">UI開發簡介</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Software Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Working with TouchGFX</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/using-ides-with-touchgfx">將IDE與TouchGFX組合使用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/widgets-and-containers">小部件和容器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/simulator">模擬器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/compiling-and-flashing">編譯與燒錄</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/debugging">除錯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/examples">範例和特定於開發板的演示</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/keyboard-shortcuts">鍵盤快速鍵</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Designer User Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">TouchGFX Engine Features</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">UI Components</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Scenarios</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Scenarios</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Miscellaneous</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Resources</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>模擬器</h1></header><p>構建TouchGFX UI通常涉及大量的圖形細節，以匹配UI的規範。</p><p>為了加快開發過程，在實驗和除錯應用程式時，有一個快速的周轉時間很重要。 燒錄一個開發板通常需要相當長一段時間，所以每次對應用程式進行小的改動都會減慢開發速度。 為了緩解這種情況，TouchGFX PC模擬器是一個很好的開發工具。</p><p>您只需對PC編譯應用程式並在PC上運行應用程式。 除了Board Bring Up程式碼和抽象層（這是對PC（而不是開發板）的），執行的程式碼與目標硬體上運行的程式碼完全相同。 這意味著可以像在目標硬體上一樣精確地測試小部件的位置安排、交互、動畫、狀態機等。 如果願意，甚至可以使用Visual Studio這樣的IDE<a href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/debugging">除錯</a>自己的代碼。 當然，像性能分析和與真正的後端系統進行交互這樣的事情必須在開發上進行。</p><div class="loop-video"><video muted="" loop="" playsinline="" autoplay="" width="100%" height="100%"><source src="/4.19/zh-TW/videos/development/ui-development/working-with-touchgfx/simulator/simulator-example.mp4" type="video/mp4">Your browser does not support the video tag.</video><p>模擬器範例</p></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-to-run">如何運行<a aria-hidden="true" class="hash-link" href="#how-to-run" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="using-touchgfx-designer">使用TouchGFX Designer<a aria-hidden="true" class="hash-link" href="#using-touchgfx-designer" title="Direct link to heading">​</a></h3><p>如要從TouchGFX Designer內部啟動模擬器，只需按下右上角的“Run Simulator（運行模擬器）”按鈕，或者按下 <code class="shortcut">鍵盤上的F5</code> 。</p><div class="figure"><a href="/4.19/zh-TW/img/development/ui-development/working-with-touchgfx/simulator/run-simulator-designer-4.17.png" target="_blank"><img src="/4.19/zh-TW/img/development/ui-development/working-with-touchgfx/simulator/run-simulator-designer-4.17.png"></a><p>從TouchGFX Designer啟動模擬器</p></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="using-touchgfx-environment">使用TouchGFX Environment<a aria-hidden="true" class="hash-link" href="#using-touchgfx-environment" title="Direct link to heading">​</a></h3><p>如要使用TouchGFX環境啟動模擬器，請遵循以下步驟：</p><ol><li>打開TouchGFX Environment</li><li>導航到TouchGFX應用程式所在位置<ol><li>for simulator only projects, this is e.g. <code>C:/TouchGFXProjects/MyApplication_1</code></li><li>for target projects, this is e.g. <code>C:/TouchGFXProjects/MyApplication_1/TouchGFX/</code></li></ol></li><li>運行指令<code>make -f simulator/gcc/Makefile -j6</code>以編譯模擬器</li><li>運行指令<code>./build/bin/simulator.exe</code>以啟動模擬器</li></ol><p>如果對TouchGFX應用程式進行了更改，請運行步驟3和步驟4。</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="simulator-features">模擬器功能<a aria-hidden="true" class="hash-link" href="#simulator-features" title="Direct link to heading">​</a></h2><p>除了捕捉滑鼠輸入，TouchGFX模擬器還包括其他有用的功能，如下所列：</p><table spaces-before="0"><tr><th>快速鍵</th><th>特徵</th></tr><tr><td><code class="shortcut">F1</code></td><td>啟用/禁用指標座標的顯示以及該座標上像素的RGB顏色（十六進位）。</td></tr><tr><td><code class="shortcut">F2</code></td><td>啟用/禁用突出顯示無效區域。</td></tr><tr><td><code class="shortcut">F3</code></td><td>擷取螢幕並將圖片置於<code>screenshots</code>資料夾中。</td></tr><tr><td><code class="shortcut">CTRL + F3</code></td><td>對接下來的50幀進行截圖並將圖片置於<code>screenshots</code>資料夾中。</td></tr><tr><td><code class="shortcut">SHIFT + F3</code></td><td>截圖並將圖片置於剪貼板中。</td></tr><tr><td><code class="shortcut">F4</code></td><td>如果使用模擬器皮膚 - 啟用/禁用模擬器皮膚。<br>如果<i>未</i> 使用模擬器皮膚 - 啟用/禁用視窗邊框。</td></tr><tr><td><code class="shortcut">鍵盤上的F5</code></td><td>Sends the application straight back to the startup screen by calling FrontendApplication::changeToStartScreen().</td></tr><tr><td><code class="shortcut">F9</code></td><td>通過阻止向應用程式發送時鐘信號來暫停模擬器。 再次按下F9可恢復正常執行。</td></tr><tr><td><code class="shortcut">F10</code></td><td>當（按下F9）模擬器暫停後，可以通過按下F10發送一個時鐘信號到應用程式，從而對應用程式進行“單步作業”。</td></tr><tr><td><code class="shortcut">ESC</code></td><td>關閉模擬器。</td></tr></table><h2 class="anchor anchorWithStickyNavbar_31ik" id="simulator-only-user-code">僅可通過模擬器運行的程式碼<a aria-hidden="true" class="hash-link" href="#simulator-only-user-code" title="Direct link to heading">​</a></h2><p>If you have some code that should only run when using TouchGFX simulator, you can use <code>#ifdef SIMULATOR</code> in your C++ code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">ifdef</span><span class="token macro property"> </span><span class="token macro property expression">SIMULATOR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Your simulator specific user code here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">複製</button></div></div><p>如果要將除錯文字輸出到控制台，可以使用<code>touchgfx_printf</code>函數。 這是一個類似於printf的函數，只會在構建模擬器程式碼時包含，因此在目標硬體上運行時不會干擾。 Therefore there is no need to use <code>#ifdef SIMULATOR</code> in this case.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">touchgfx_printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Application is running through simulator! \n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">touchgfx_printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Print our value for integer i = %i \n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">複製</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="locking-and-unlocking-the-framebuffer">鎖定和解鎖影像緩衝區<a aria-hidden="true" class="hash-link" href="#locking-and-unlocking-the-framebuffer" title="Direct link to heading">​</a></h2><p>If you write code that directly manipulates the framebuffer, it is important to lock the framebuffer before writing pixels to the framebuffer memory, and it is just as important to remember to unlock the framebuffer after having written to the framebuffer.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="locking-the-framebuffer">鎖定影像緩衝區<a aria-hidden="true" class="hash-link" href="#locking-the-framebuffer" title="Direct link to heading">​</a></h3><p>使用該程式碼片段鎖定影像緩衝區：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> RESTRICT buf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">lockFrameBuffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">複製</button></div></div><p>由於歷史原因，返回值是指向影像緩衝區的16位指標。 將指針強制轉換為適當的指針類型，以便更輕鬆地存取影像緩衝區。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="unlocking-the-framebuffer">解鎖影像緩衝區<a aria-hidden="true" class="hash-link" href="#unlocking-the-framebuffer" title="Direct link to heading">​</a></h3><p>使用以下程式碼解鎖使用後的影像緩衝區：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">unlockFrameBuffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">複製</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="forgetting-to-unlock-the-framebuffer">忘記解鎖影像緩衝區<a aria-hidden="true" class="hash-link" href="#forgetting-to-unlock-the-framebuffer" title="Direct link to heading">​</a></h3><p>如果忘記解鎖影像緩衝區，則硬體在影像緩衝區變得可用之前會一直等待並且暫時凍結。 為了幫助檢測這種情況，如果TouchGFX框架要求鎖定影像緩衝區，而影像緩衝區仍然處於鎖定狀態，就會收到一個報錯資訊。 報錯資訊就像Microsoft Visual Studio所提示的：</p><div class="figure"><a href="/4.19/zh-TW/img/development/ui-development/working-with-touchgfx/simulator/windows-unlock-framebuffer.png" target="_blank"><img src="/4.19/zh-TW/img/development/ui-development/working-with-touchgfx/simulator/windows-unlock-framebuffer.png"></a><p>影像緩衝區未解鎖時的Window對話方塊</p></div><p>對於控制台程式，報錯資訊就像這樣：</p><div class="figure"><a href="/4.19/zh-TW/img/development/ui-development/working-with-touchgfx/simulator/console-unlock-framebuffer.png" target="_blank"><img src="/4.19/zh-TW/img/development/ui-development/working-with-touchgfx/simulator/console-unlock-framebuffer.png"></a><p>影像緩衝區未解鎖時的控制台列印輸出</p></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="simulating-hardware-framebuffer-with-a-different-size-than-the-display">Simulating hardware framebuffer with a different size than the display<a aria-hidden="true" class="hash-link" href="#simulating-hardware-framebuffer-with-a-different-size-than-the-display" title="Direct link to heading">​</a></h3><p>Some setups may have a display size which is smaller than the actual hardware&#x27;s framebuffer. This can also be handled by the simulater, and is configured in the file simulator/main.cpp right after the call to touchgfx_generic_init().</p><p>The width and height passed to touchgfx_generic_init() defines the size of the display and the framebuffer, but if the hardware framebuffer has a different size, simply call setFrameBufferSize() after calling touchgfx_generic_init() to specify the size of the actual framebuffer, e.g. as follows where SIM_WIDTH=800 and SIM_HEIGHT==480:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">touchgfx</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">HAL</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> hal </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> touchgfx</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">touchgfx_generic_init</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">touchgfx</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">HALSDL2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dma</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> lcd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> tc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> SIM_WIDTH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> SIM_HEIGHT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">hal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setFrameBufferSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">832</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">480</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Hardware framebuffer is wider</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">複製</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/widgets-and-containers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->小部件和容器</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/4.19/zh-TW/docs/development/ui-development/working-with-touchgfx/compiling-and-flashing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">編譯與燒錄<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-run" class="table-of-contents__link toc-highlight">如何運行</a><ul><li><a href="#using-touchgfx-designer" class="table-of-contents__link toc-highlight">使用TouchGFX Designer</a></li><li><a href="#using-touchgfx-environment" class="table-of-contents__link toc-highlight">使用TouchGFX Environment</a></li></ul></li><li><a href="#simulator-features" class="table-of-contents__link toc-highlight">模擬器功能</a></li><li><a href="#simulator-only-user-code" class="table-of-contents__link toc-highlight">僅可通過模擬器運行的程式碼</a></li><li><a href="#locking-and-unlocking-the-framebuffer" class="table-of-contents__link toc-highlight">鎖定和解鎖影像緩衝區</a><ul><li><a href="#locking-the-framebuffer" class="table-of-contents__link toc-highlight">鎖定影像緩衝區</a></li><li><a href="#unlocking-the-framebuffer" class="table-of-contents__link toc-highlight">解鎖影像緩衝區</a></li><li><a href="#forgetting-to-unlock-the-framebuffer" class="table-of-contents__link toc-highlight">忘記解鎖影像緩衝區</a></li><li><a href="#simulating-hardware-framebuffer-with-a-different-size-than-the-display" class="table-of-contents__link toc-highlight">Simulating hardware framebuffer with a different size than the display</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2021 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div>
<script src="/4.19/zh-TW/assets/js/runtime~main.7d7308f7.js"></script>
<script src="/4.19/zh-TW/assets/js/main.01805fa2.js"></script>
</body>
</html>